var ss=Object.defineProperty;var ls=(n,t,e)=>t in n?ss(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var N=(n,t,e)=>ls(n,typeof t!="symbol"?t+"":t,e);var os=require("siyuan");var nn="asri-enhance-",an=["amber","sakura","wilderness","midnight","salt","rosepine","topaz","oxygen","shade","gruvbox","glitch","nostalgia"];async function y(n,t,e){if(!n.saveData)throw new Error("Plugin saveData method is not available");try{await n.saveData(t,e)}catch(a){throw a}}async function p(n,t){if(!n.loadData)return null;try{return await n.loadData(t)||null}catch(e){return null}}async function Ua(n,t,e="config.json"){let a=document.documentElement;if(!a)return;let r=a.getAttribute("data-theme-mode")||"light";a.getAttribute("data-asri-palette")===t&&a.removeAttribute("data-asri-palette");let i=await p(n,e);if(!i)return;let o=`${nn}${t}`,s=i[o];s!==void 0&&(typeof s=="boolean"?delete i[o]:s&&typeof s=="object"&&(s[r]=!1,i[o]=s),await y(n,e,i))}async function Xa(n,t="config.json"){let e=await p(n,t);if(!e)return;let a=!1;Object.keys(e).forEach(r=>{r.startsWith(nn)&&(delete e[r],a=!0)}),a&&await y(n,t,e)}async function Za(n,t="config.json"){let e=document.documentElement;if(!e)return;let a=e.getAttribute("data-theme-mode")||"light",r=await p(n,t);if(!r)return;let i=!1;an.forEach(o=>{let s=`${nn}${o}`,l=r[s];l!==void 0&&(typeof l=="boolean"?(delete r[s],i=!0):l&&typeof l=="object"&&l[a]===!0&&(l[a]=!1,r[s]=l,i=!0))}),i&&await y(n,t,r)}var De="config.json",xe="asri-enhance-follow-time",rn="asri-enhance-follow-time-base-color",ie="data-asri-enhance-follow-time",Qa="data-asri-enhance-follow-time-base-color";async function Ja(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e||e.hasAttribute(ie))return;let r=e.getAttribute("data-theme-mode")||"light",i=await p(n,De)||{},o=i[xe]||{light:!1,dark:!1},s=()=>{e.setAttribute(ie,"true"),e.removeAttribute("data-asri-palette"),o[r]=!0,i[xe]=o};document.startViewTransition?await document.startViewTransition(()=>{s()}).finished.catch(()=>{}):s(),await y(n,De,i).catch(()=>{})}async function er(n,t){let e=document.documentElement;if(!e)return;let a=e.getAttribute("data-theme-mode")||"light",r=t!==void 0?t:await p(n,De);if(r&&r[xe]){let i=r[xe];(typeof i=="boolean"?i:i[a]===!0)?(e.setAttribute(ie,"true"),e.removeAttribute("data-asri-palette")):e.removeAttribute(ie)}else e.removeAttribute(ie);if(r&&r[rn]){let i=r[rn];e.style.setProperty("--asri-enhance-follow-time-base-color",i),e.setAttribute(Qa,i)}}async function qe(n,t="config.json"){let e=document.documentElement;e&&e.removeAttribute(ie);let a=await p(n,t);a&&a[xe]!==void 0&&(delete a[xe],await y(n,t,a))}async function tr(n,t){let e=await p(n,De)||{};e[rn]=t,await y(n,De,e);let a=document.documentElement;a&&(a.style.setProperty("--asri-enhance-follow-time-base-color",t),a.setAttribute(Qa,t),a.hasAttribute(ie)&&(a.removeAttribute(ie),a.offsetWidth,a.setAttribute(ie,"true")))}var xt="config.json";async function D(n,t,e){let a=document.documentElement;if(!a)return;let r=a.getAttribute("data-theme-mode")||"light";if(a.getAttribute("data-asri-palette")===t.name)return;let o=await p(n,xt)||{},s=o[t.configKey]||{light:!1,dark:!1},l=()=>{a.removeAttribute("data-asri-palette"),a.setAttribute("data-asri-palette",t.name),s[r]=!0;for(let c of t.otherConfigKeys)if(o[c]){let u=o[c];typeof u=="object"&&(u[r]=!1,o[c]=u)}if(o[t.configKey]=s,o["asri-enhance-follow-time"]){let c=o["asri-enhance-follow-time"];typeof c=="object"&&(c[r]=!1,o["asri-enhance-follow-time"]=c),a.removeAttribute("data-asri-enhance-follow-time"),qe(n,xt).catch(()=>{})}};document.startViewTransition?await document.startViewTransition(()=>{l()}).finished.catch(()=>{}):l(),await y(n,xt,o).catch(()=>{})}async function q(n,t,e){let a=document.documentElement;if(!a)return;let r=a.getAttribute("data-theme-mode")||"light",i=e!==void 0?e:await p(n,xt);if(i&&i[t.configKey]){let o=i[t.configKey];(typeof o=="boolean"?o:o[r]===!0)?(a.removeAttribute("data-asri-palette"),a.setAttribute("data-asri-palette",t.name),a.removeAttribute("data-asri-enhance-follow-time")):a.getAttribute("data-asri-palette")===t.name&&a.removeAttribute("data-asri-palette")}}var nr={name:"amber",configKey:"asri-enhance-amber",otherConfigKeys:["asri-enhance-sakura","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-glitch","asri-enhance-nostalgia"]};async function ar(n,t){return D(n,nr,t)}async function rr(n,t){return q(n,nr,t)}var ir={name:"sakura",configKey:"asri-enhance-sakura",otherConfigKeys:["asri-enhance-amber","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-glitch","asri-enhance-nostalgia"]};async function or(n,t){return D(n,ir,t)}async function sr(n,t){return q(n,ir,t)}var lr={name:"wilderness",configKey:"asri-enhance-wilderness",otherConfigKeys:["asri-enhance-sakura","asri-enhance-amber","asri-enhance-midnight","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-glitch","asri-enhance-nostalgia"]};async function cr(n,t){return D(n,lr,t)}async function ur(n,t){return q(n,lr,t)}var mr={name:"midnight",configKey:"asri-enhance-midnight",otherConfigKeys:["asri-enhance-sakura","asri-enhance-amber","asri-enhance-wilderness","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-glitch","asri-enhance-nostalgia"]};async function dr(n,t){return D(n,mr,t)}async function hr(n,t){return q(n,mr,t)}var pr={name:"salt",configKey:"asri-enhance-salt",otherConfigKeys:["asri-enhance-sakura","asri-enhance-amber","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-glitch","asri-enhance-nostalgia"]};async function fr(n,t){return D(n,pr,t)}async function gr(n,t){return q(n,pr,t)}var br={name:"rosepine",configKey:"asri-enhance-rosepine",otherConfigKeys:["asri-enhance-sakura","asri-enhance-amber","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-salt","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-glitch","asri-enhance-nostalgia"]};async function yr(n,t){return D(n,br,t)}async function vr(n,t){return q(n,br,t)}var Er={name:"topaz",configKey:"asri-enhance-topaz",otherConfigKeys:["asri-enhance-sakura","asri-enhance-amber","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-glitch","asri-enhance-nostalgia"]};async function kr(n,t){return D(n,Er,t)}async function wr(n,t){return q(n,Er,t)}var xr={name:"oxygen",configKey:"asri-enhance-oxygen",otherConfigKeys:["asri-enhance-sakura","asri-enhance-amber","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-glitch","asri-enhance-nostalgia"]};async function Cr(n,t){return D(n,xr,t)}async function Tr(n,t){return q(n,xr,t)}var _r={name:"shade",configKey:"asri-enhance-shade",otherConfigKeys:["asri-enhance-sakura","asri-enhance-amber","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-gruvbox","asri-enhance-glitch","asri-enhance-nostalgia"]};async function Ar(n,t){return D(n,_r,t)}async function Lr(n,t){return q(n,_r,t)}var Mr={name:"gruvbox",configKey:"asri-enhance-gruvbox",otherConfigKeys:["asri-enhance-sakura","asri-enhance-amber","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-glitch","asri-enhance-nostalgia"]};async function Pr(n,t){return D(n,Mr,t)}async function Sr(n,t){return q(n,Mr,t)}var Hr={name:"glitch",configKey:"asri-enhance-glitch",otherConfigKeys:["asri-enhance-sakura","asri-enhance-amber","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-nostalgia"]};async function Rr(n,t){return D(n,Hr,t)}async function Ir(n,t){return q(n,Hr,t)}var Nr={name:"nostalgia",configKey:"asri-enhance-nostalgia",otherConfigKeys:["asri-enhance-amber","asri-enhance-sakura","asri-enhance-wilderness","asri-enhance-midnight","asri-enhance-salt","asri-enhance-rosepine","asri-enhance-topaz","asri-enhance-oxygen","asri-enhance-shade","asri-enhance-gruvbox","asri-enhance-glitch"]};async function Fr(n,t){return D(n,Nr,t)}async function $r(n,t){return q(n,Nr,t)}var on="config.json",sn="asri-enhance-coloredheading";async function Or(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-coloredheading"),r=await p(n,on)||{};a?(e.removeAttribute("data-asri-enhance-coloredheading"),r[sn]=!1):(e.setAttribute("data-asri-enhance-coloredheading","true"),r[sn]=!0),await y(n,on,r).catch(()=>{})}async function Dr(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,on);a&&a[sn]===!0?e.setAttribute("data-asri-enhance-coloredheading","true"):e.removeAttribute("data-asri-enhance-coloredheading")}var ln="config.json",cn="asri-enhance-headinglevelhint",Be="data-asri-enhance-headinglevelhint";async function qr(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute(Be),r=await p(n,ln)||{};a?(e.removeAttribute(Be),r[cn]=!1):(e.setAttribute(Be,"true"),r[cn]=!0),await y(n,ln,r).catch(()=>{})}async function Br(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,ln);a&&a[cn]===!0?e.setAttribute(Be,"true"):e.removeAttribute(Be)}var un="config.json",mn="asri-enhance-colored-tree";async function zr(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-colored-tree"),r=await p(n,un)||{};a?(e.removeAttribute("data-asri-enhance-colored-tree"),r[mn]=!1):(e.setAttribute("data-asri-enhance-colored-tree","true"),r[mn]=!0),await y(n,un,r).catch(()=>{})}async function Gr(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,un);a&&a[mn]===!0?e.setAttribute("data-asri-enhance-colored-tree","true"):e.removeAttribute("data-asri-enhance-colored-tree")}var dn="config.json",hn="asri-enhance-colored-list";async function jr(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-colored-list"),r=await p(n,dn)||{};a?(e.removeAttribute("data-asri-enhance-colored-list"),r[hn]=!1):(e.setAttribute("data-asri-enhance-colored-list","true"),r[hn]=!0),await y(n,dn,r).catch(()=>{})}async function Kr(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,dn);a&&a[hn]===!0?e.setAttribute("data-asri-enhance-colored-list","true"):e.removeAttribute("data-asri-enhance-colored-list")}var fn="config.json",gn="asri-enhance-listbulletline",cs=".asri-enhance-bullet-highlight,.asri-enhance-bullet-line",bn="asri-enhance-bullet-highlight",ge="asri-enhance-bullet-line",Ce="--asri-enhance-bullet-line-height",Te=null,ze=null,J=null,Ct=new Set,Vr=()=>{document.querySelectorAll(cs).forEach(n=>{n.classList.remove(bn,ge),n.style.removeProperty(Ce)}),Ct.clear()},us=n=>{n.classList.remove(bn,ge),n.style.removeProperty(Ce)},ms=(n,t,e)=>{if(n.classList.add(bn),t&&e){let a=n.getBoundingClientRect(),r=e.getBoundingClientRect();n.style.setProperty(Ce,`${a.top-r.top}px`),n.classList.add(ge)}},pn=n=>{var r,i,o,s;let t=window.getSelection(),e=[];if(n){let l=n;for(;l;){let c=l;if(((r=c.dataset)==null?void 0:r.type)==="NodeListItem"&&e.push(c),(i=c.classList)!=null&&i.contains("protyle-wysiwyg"))break;l=c.parentElement}}else if(t&&t.rangeCount){let l=t.getRangeAt(0).startContainer;for(;l&&l.nodeType!==Node.ELEMENT_NODE;)l=l.parentElement;for(;l;){let c=l;if(((o=c.dataset)==null?void 0:o.type)==="NodeListItem"&&e.push(c),(s=c.classList)!=null&&s.contains("protyle-wysiwyg"))break;l=c.parentElement}}let a=new Set(e);Ct.forEach(l=>{a.has(l)||us(l)}),e.forEach((l,c)=>{let u=c<e.length-1,f=u?e[c+1]:void 0;if(!Ct.has(l))ms(l,u,f);else if(u&&f){let d=l.getBoundingClientRect(),k=f.getBoundingClientRect(),g=`${d.top-k.top}px`;l.style.getPropertyValue(Ce)!==g&&l.style.setProperty(Ce,g),l.classList.contains(ge)||l.classList.add(ge)}else l.classList.contains(ge)&&(l.classList.remove(ge),l.style.removeProperty(Ce))}),Ct=a},Wr=()=>{Te||(Te=()=>{J&&clearTimeout(J),J=setTimeout(()=>{pn(),J=null},50)},ze=n=>{var e;let t=n.composedPath()[0];(e=t.closest)!=null&&e.call(t,".protyle-action")&&(J&&clearTimeout(J),J=setTimeout(()=>{pn(t),J=null},50))},document.addEventListener("selectionchange",Te),document.addEventListener("click",ze,{capture:!0}),pn())},yn=()=>{if(!Te){Vr();return}J&&(clearTimeout(J),J=null),document.removeEventListener("selectionchange",Te),ze&&(document.removeEventListener("click",ze,{capture:!0}),ze=null),Te=null,Vr()};async function Yr(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-listbulletline"),r=await p(n,fn)||{};a?(e.removeAttribute("data-asri-enhance-listbulletline"),r[gn]=!1,yn()):(e.setAttribute("data-asri-enhance-listbulletline","true"),r[gn]=!0,Wr()),await y(n,fn,r).catch(()=>{})}async function Ur(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,fn);a&&a[gn]===!0?(e.setAttribute("data-asri-enhance-listbulletline","true"),Wr()):(e.removeAttribute("data-asri-enhance-listbulletline"),yn())}var Xr=()=>{yn()};var _e=[],Zr=window.fetch,Tt=!1;function ds(){if(Tt)return;let n=Zr,t=new Proxy(n,{apply(e,a,r){try{let[i,o]=r,s=i instanceof URL?i.href:String(i),l=null;try{if(o&&typeof o=="object"){let c=o.body;if(typeof c=="string")l=c;else if(c instanceof URLSearchParams)l=c.toString();else if(c&&typeof c=="object")try{l=JSON.stringify(c)}catch(u){l=null}}}catch(c){l=null}_e.forEach(c=>{try{let u=c.pattern.test(s),f=l?c.pattern.test(l):!1;(u||f)&&queueMicrotask(()=>{try{c.callback(s,o)}catch(d){}})}catch(u){}})}catch(i){}return Reflect.apply(n,a,r)}});try{window.fetch=t,Tt=!0}catch(e){}try{let e=XMLHttpRequest.prototype.open,a=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(r,i,o,s,l){try{this.__asri_intercept_url=i instanceof URL?i.href:String(i)}catch(c){}return e.apply(this,arguments)},XMLHttpRequest.prototype.send=function(r){try{let i=this.__asri_intercept_url||"",o=null;try{if(typeof r=="string")o=r;else if(r instanceof URLSearchParams)o=r.toString();else if(r&&typeof r=="object")try{o=JSON.stringify(r)}catch(s){o=null}}catch(s){o=null}(i||o)&&_e.forEach(s=>{try{let l=i?s.pattern.test(i):!1,c=o?s.pattern.test(o):!1;(l||c)&&queueMicrotask(()=>{try{s.callback(i,r)}catch(u){}})}catch(l){}})}catch(i){}return a.apply(this,arguments)}}catch(e){}}function _t(n,t){let a={pattern:n instanceof RegExp?n:new RegExp(String(n)),callback:t};return _e.push(a),ds(),{disconnect:()=>{let i=_e.indexOf(a);if(i!==-1&&_e.splice(i,1),_e.length===0&&Tt){try{window.fetch=Zr}catch(o){}Tt=!1}}}}var vn="config.json",En="asri-enhance-vertical-tab",Mt=150,ti=null,Lt=!1,Ge=!1,Qr=0,Jr=0,ce=null,ue=null,ae=null,le=null,oe=null,At=null,Ae=null;function hs(n=10,t=100){return new Promise(e=>{let a=0,r=()=>{let i=document.querySelector(".layout__center");if(i){e(i);return}if(a++,a>=n){e(null);return}setTimeout(r,t)};r()})}function ps(){let n=oe!=null?oe:document.documentElement,t=getComputedStyle(n).getPropertyValue("--asri-enhance-vertical-tab-width").trim();if(t){let e=parseFloat(t);return isNaN(e)?Mt:e}return Mt}function Pt(n){(oe!=null?oe:document.documentElement).style.setProperty("--asri-enhance-vertical-tab-width",`${n}px`)}function fs(){Pt(Mt)}function gs(){ae!==null&&(cancelAnimationFrame(ae),ae=null),le=null,ce&&(document.removeEventListener("mousemove",ce),ce=null),ue&&(document.removeEventListener("mouseup",ue),ue=null),Ge=!1}function bs(n){let t=()=>n.previousElementSibling,e=()=>{let l=t();l&&l.classList.contains("fn__flex")&&l.classList.add("asri-enhance-verticaltab-resizing")},a=()=>{let l=t();l&&l.classList.contains("fn__flex")&&l.classList.remove("asri-enhance-verticaltab-resizing")},r=l=>{l.preventDefault(),l.stopPropagation(),Ge=!0,Qr=l.clientX,Jr=ps(),document.body.style.userSelect="none",document.body.style.cursor="col-resize",e(),ce=c=>{if(!Ge)return;c.preventDefault();let u=c.clientX-Qr;le=Math.max(100,Math.min(300,Jr+u)),ae!==null&&cancelAnimationFrame(ae),ae=requestAnimationFrame(()=>{le!==null&&(Pt(le),le=null),ae=null})},ue=()=>{Ge&&(Ge=!1,document.body.style.userSelect="",document.body.style.cursor="",a(),ae!==null&&(cancelAnimationFrame(ae),ae=null),le!==null&&(Pt(le),le=null),ce&&(document.removeEventListener("mousemove",ce),ce=null),ue&&(document.removeEventListener("mouseup",ue),ue=null))},document.addEventListener("mousemove",ce),document.addEventListener("mouseup",ue)},i=l=>{l.preventDefault(),l.stopPropagation(),fs()},o=n.__asriMousedownHandler,s=n.__asriDblclickHandler;o&&n.removeEventListener("mousedown",o),s&&n.removeEventListener("dblclick",s),n.__asriMousedownHandler=r,n.__asriDblclickHandler=i,n.addEventListener("mousedown",r),n.addEventListener("dblclick",i)}function ei(n){if(Lt)return;let t=n.querySelectorAll('[data-type="wnd"]');if(t.length===0)return;let e=null,a=1/0,r=1/0;if(t.forEach(i=>{let o=i.getBoundingClientRect(),s=o.top,l=o.left;(s<a||s===a&&l<r)&&(a=s,r=l,e=i)}),Lt=!0,t.forEach(i=>{if(i!==e){i.classList.remove("asri-enhance-verticaltab"),i.classList.remove("asri-enhance-verticaltab-toponly"),i.classList.remove("asri-enhance-verticaltab-dockr-expand-spacing");let o=i.querySelector(".layout__resize.layout__resize--lr.asri-enhance-verticaltab-resize");o&&o.remove()}}),e){!e.classList.contains("asri-enhance-verticaltab")&&e.classList.add("asri-enhance-verticaltab"),oe=e;let s=e.getBoundingClientRect().top,l=1,c=!1;t.forEach(f=>{if(f!==e){let d=f.getBoundingClientRect();Math.abs(d.top-s)<=l&&(c=!0)}}),c?e.classList.remove("asri-enhance-verticaltab-toponly"):e.classList.add("asri-enhance-verticaltab-toponly");let u=Array.from(e.children).find(f=>f.classList.contains("fn__flex"));if(u&&u.parentElement){let f=u.parentElement.querySelector(".layout__resize.layout__resize--lr.asri-enhance-verticaltab-resize");f||(f=document.createElement("div"),f.className="layout__resize layout__resize--lr asri-enhance-verticaltab-resize",u.parentElement.insertBefore(f,u.nextSibling)),bs(f)}ni(e)}Lt=!1}function ys(){let n=At!=null?At:document.querySelector("#toolbar");if(!n)return 0;At=n;let t=getComputedStyle(n).getPropertyValue("--topbar-right-spacing");if(!t)return 0;let e=parseFloat(t);return isNaN(e)?0:e}function ni(n){let t=n!=null?n:oe;if(!t)return;let e=document.querySelector(".layout__center");if(!e)return;document.querySelector(".layout__dockr > .fn__flex:not(.fn__none)")!==null?e.classList.remove("asri-enhance-dockr-fold"):e.classList.add("asri-enhance-dockr-fold"),ys()>0?t.classList.add("asri-enhance-verticaltab-dockr-expand-spacing"):t.classList.remove("asri-enhance-verticaltab-dockr-expand-spacing")}async function ai(){let n=await hs();if(n&&(ei(n),Pt(Mt),!Ae))try{let t=_t("setUILayout",()=>{let e=document.querySelector(".layout__center");e&&queueMicrotask(()=>{try{ei(e),ni()}catch(a){}})});Ae=()=>{try{t.disconnect()}catch(e){}Ae=null}}catch(t){}}function St(){if(gs(),Ae){try{Ae()}catch(a){}Ae=null}let n=document.querySelector(".layout__center");n&&n.classList.remove("asri-enhance-dockr-fold"),document.querySelectorAll('[data-type="wnd"]').forEach(a=>{a.classList.remove("asri-enhance-verticaltab"),a.classList.remove("asri-enhance-verticaltab-toponly"),a.classList.remove("asri-enhance-verticaltab-dockr-expand-spacing");let r=a.querySelector(".layout__resize.layout__resize--lr.asri-enhance-verticaltab-resize");if(r){let i=r.__asriMousedownHandler,o=r.__asriDblclickHandler;i&&(r.removeEventListener("mousedown",i),delete r.__asriMousedownHandler),o&&(r.removeEventListener("dblclick",o),delete r.__asriDblclickHandler),r.remove()}});let e=document.documentElement;e&&e.style.removeProperty("--asri-enhance-vertical-tab-width"),Lt=!1,oe=null}async function ri(n,t){t&&(t.preventDefault(),t.stopPropagation()),ti=n;let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-vertical-tab"),r=await p(n,vn)||{};a?(e.removeAttribute("data-asri-enhance-vertical-tab"),r[En]=!1,St()):(e.setAttribute("data-asri-enhance-vertical-tab","true"),r[En]=!0,ai().catch(()=>{})),await y(n,vn,r).catch(()=>{})}async function ii(n,t){ti=n;let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,vn);a&&a[En]===!0?(e.setAttribute("data-asri-enhance-vertical-tab","true"),ai().catch(()=>{})):(e.removeAttribute("data-asri-enhance-vertical-tab"),St())}function Cn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ye=Cn();function di(n){ye=n}var We={exec:()=>null};function H(n,t=""){let e=typeof n=="string"?n:n.source,a={replace:(r,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(W.caret,"$1"),e=e.replace(r,o),a},getRegex:()=>new RegExp(e,t)};return a}var vs=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch(n){return!1}})(),W={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},Es=/^(?:[ \t]*(?:\n|$))+/,ks=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,ws=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ye=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,xs=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Tn=/(?:[*+-]|\d{1,9}[.)])/,hi=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,pi=H(hi).replace(/bull/g,Tn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Cs=H(hi).replace(/bull/g,Tn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),_n=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ts=/^[^\n]+/,An=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,_s=H(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",An).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),As=H(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Tn).getRegex(),$t="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ln=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ls=H("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ln).replace("tag",$t).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),fi=H(_n).replace("hr",Ye).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$t).getRegex(),Ms=H(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",fi).getRegex(),Mn={blockquote:Ms,code:ks,def:_s,fences:ws,heading:xs,hr:Ye,html:Ls,lheading:pi,list:As,newline:Es,paragraph:fi,table:We,text:Ts},oi=H("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ye).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$t).getRegex(),Ps={...Mn,lheading:Cs,table:oi,paragraph:H(_n).replace("hr",Ye).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",oi).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$t).getRegex()},Ss={...Mn,html:H(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ln).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:We,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:H(_n).replace("hr",Ye).replace("heading",` *#{1,6} *[^
]`).replace("lheading",pi).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Hs=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Rs=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,gi=/^( {2,}|\\)\n(?!\s*$)/,Is=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ot=/[\p{P}\p{S}]/u,Pn=/[\s\p{P}\p{S}]/u,bi=/[^\s\p{P}\p{S}]/u,Ns=H(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Pn).getRegex(),yi=/(?!~)[\p{P}\p{S}]/u,Fs=/(?!~)[\s\p{P}\p{S}]/u,$s=/(?:[^\s\p{P}\p{S}]|~)/u,Os=H(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",vs?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),vi=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Ds=H(vi,"u").replace(/punct/g,Ot).getRegex(),qs=H(vi,"u").replace(/punct/g,yi).getRegex(),Ei="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Bs=H(Ei,"gu").replace(/notPunctSpace/g,bi).replace(/punctSpace/g,Pn).replace(/punct/g,Ot).getRegex(),zs=H(Ei,"gu").replace(/notPunctSpace/g,$s).replace(/punctSpace/g,Fs).replace(/punct/g,yi).getRegex(),Gs=H("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,bi).replace(/punctSpace/g,Pn).replace(/punct/g,Ot).getRegex(),js=H(/\\(punct)/,"gu").replace(/punct/g,Ot).getRegex(),Ks=H(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Vs=H(Ln).replace("(?:-->|$)","-->").getRegex(),Ws=H("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Vs).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),It=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Ys=H(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",It).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ki=H(/^!?\[(label)\]\[(ref)\]/).replace("label",It).replace("ref",An).getRegex(),wi=H(/^!?\[(ref)\](?:\[\])?/).replace("ref",An).getRegex(),Us=H("reflink|nolink(?!\\()","g").replace("reflink",ki).replace("nolink",wi).getRegex(),si=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Sn={_backpedal:We,anyPunctuation:js,autolink:Ks,blockSkip:Os,br:gi,code:Rs,del:We,emStrongLDelim:Ds,emStrongRDelimAst:Bs,emStrongRDelimUnd:Gs,escape:Hs,link:Ys,nolink:wi,punctuation:Ns,reflink:ki,reflinkSearch:Us,tag:Ws,text:Is,url:We},Xs={...Sn,link:H(/^!?\[(label)\]\((.*?)\)/).replace("label",It).getRegex(),reflink:H(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",It).getRegex()},kn={...Sn,emStrongRDelimAst:zs,emStrongLDelim:qs,url:H(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",si).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:H(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",si).getRegex()},Zs={...kn,br:H(gi).replace("{2,}","*").getRegex(),text:H(kn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ht={normal:Mn,gfm:Ps,pedantic:Ss},je={normal:Sn,gfm:kn,breaks:Zs,pedantic:Xs},Qs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},li=n=>Qs[n];function se(n,t){if(t){if(W.escapeTest.test(n))return n.replace(W.escapeReplace,li)}else if(W.escapeTestNoEncode.test(n))return n.replace(W.escapeReplaceNoEncode,li);return n}function ci(n){try{n=encodeURI(n).replace(W.percentDecode,"%")}catch(t){return null}return n}function ui(n,t){var i;let e=n.replace(W.findPipe,(o,s,l)=>{let c=!1,u=s;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),a=e.split(W.splitPipe),r=0;if(a[0].trim()||a.shift(),a.length>0&&!((i=a.at(-1))!=null&&i.trim())&&a.pop(),t)if(a.length>t)a.splice(t);else for(;a.length<t;)a.push("");for(;r<a.length;r++)a[r]=a[r].trim().replace(W.slashPipe,"|");return a}function Ke(n,t,e){let a=n.length;if(a===0)return"";let r=0;for(;r<a;){let i=n.charAt(a-r-1);if(i===t&&!e)r++;else if(i!==t&&e)r++;else break}return n.slice(0,a-r)}function Js(n,t){if(n.indexOf(t[1])===-1)return-1;let e=0;for(let a=0;a<n.length;a++)if(n[a]==="\\")a++;else if(n[a]===t[0])e++;else if(n[a]===t[1]&&(e--,e<0))return a;return e>0?-2:-1}function mi(n,t,e,a,r){let i=t.href,o=t.title||null,s=n[1].replace(r.other.outputLinkReplace,"$1");a.state.inLink=!0;let l={type:n[0].charAt(0)==="!"?"image":"link",raw:e,href:i,title:o,text:s,tokens:a.inlineTokens(s)};return a.state.inLink=!1,l}function el(n,t,e){let a=n.match(e.other.indentCodeCompensation);if(a===null)return t;let r=a[1];return t.split(`
`).map(i=>{let o=i.match(e.other.beginningSpace);if(o===null)return i;let[s]=o;return s.length>=r.length?i.slice(r.length):i}).join(`
`)}var Nt=class{constructor(n){N(this,"options");N(this,"rules");N(this,"lexer");this.options=n||ye}space(n){let t=this.rules.block.newline.exec(n);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(n){let t=this.rules.block.code.exec(n);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Ke(e,`
`)}}}fences(n){let t=this.rules.block.fences.exec(n);if(t){let e=t[0],a=el(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:a}}}heading(n){let t=this.rules.block.heading.exec(n);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let a=Ke(e,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(e=a.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(n){let t=this.rules.block.hr.exec(n);if(t)return{type:"hr",raw:Ke(t[0],`
`)}}blockquote(n){let t=this.rules.block.blockquote.exec(n);if(t){let e=Ke(t[0],`
`).split(`
`),a="",r="",i=[];for(;e.length>0;){let o=!1,s=[],l;for(l=0;l<e.length;l++)if(this.rules.other.blockquoteStart.test(e[l]))s.push(e[l]),o=!0;else if(!o)s.push(e[l]);else break;e=e.slice(l);let c=s.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${c}`:c,r=r?`${r}
${u}`:u;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,i,!0),this.lexer.state.top=f,e.length===0)break;let d=i.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){let k=d,g=k.raw+`
`+e.join(`
`),T=this.blockquote(g);i[i.length-1]=T,a=a.substring(0,a.length-k.raw.length)+T.raw,r=r.substring(0,r.length-k.text.length)+T.text;break}else if((d==null?void 0:d.type)==="list"){let k=d,g=k.raw+`
`+e.join(`
`),T=this.list(g);i[i.length-1]=T,a=a.substring(0,a.length-d.raw.length)+T.raw,r=r.substring(0,r.length-k.raw.length)+T.raw,e=g.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:i,text:r}}}list(n){var e,a;let t=this.rules.block.list.exec(n);if(t){let r=t[1].trim(),i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let s=this.rules.other.listItemRegex(r),l=!1;for(;n;){let u=!1,f="",d="";if(!(t=s.exec(n))||this.rules.block.hr.test(n))break;f=t[0],n=n.substring(f.length);let k=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,h=>" ".repeat(3*h.length)),g=n.split(`
`,1)[0],T=!k.trim(),E=0;if(this.options.pedantic?(E=2,d=k.trimStart()):T?E=t[1].length+1:(E=t[2].search(this.rules.other.nonSpaceChar),E=E>4?1:E,d=k.slice(E),E+=t[1].length),T&&this.rules.other.blankLine.test(g)&&(f+=g+`
`,n=n.substring(g.length+1),u=!0),!u){let h=this.rules.other.nextBulletRegex(E),b=this.rules.other.hrRegex(E),C=this.rules.other.fencesBeginRegex(E),A=this.rules.other.headingBeginRegex(E),_=this.rules.other.htmlBeginRegex(E);for(;n;){let P=n.split(`
`,1)[0],$;if(g=P,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),$=g):$=g.replace(this.rules.other.tabCharGlobal,"    "),C.test(g)||A.test(g)||_.test(g)||h.test(g)||b.test(g))break;if($.search(this.rules.other.nonSpaceChar)>=E||!g.trim())d+=`
`+$.slice(E);else{if(T||k.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(k)||A.test(k)||b.test(k))break;d+=`
`+g}!T&&!g.trim()&&(T=!0),f+=P+`
`,n=n.substring(P.length+1),k=$.slice(E)}}o.loose||(l?o.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(l=!0)),o.items.push({type:"list_item",raw:f,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),o.raw+=f}let c=o.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let u of o.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){if(u.text=u.text.replace(this.rules.other.listReplaceTask,""),((e=u.tokens[0])==null?void 0:e.type)==="text"||((a=u.tokens[0])==null?void 0:a.type)==="paragraph"){u.tokens[0].raw=u.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),u.tokens[0].text=u.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let f=this.rules.other.listTaskCheckbox.exec(u.raw);if(f){let d={type:"checkbox",raw:f[0]+" ",checked:f[0]!=="[ ]"};u.checked=d.checked,o.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=d.raw+u.tokens[0].raw,u.tokens[0].text=d.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(d)):u.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):u.tokens.unshift(d)}}if(!o.loose){let f=u.tokens.filter(k=>k.type==="space"),d=f.length>0&&f.some(k=>this.rules.other.anyLine.test(k.raw));o.loose=d}}if(o.loose)for(let u of o.items){u.loose=!0;for(let f of u.tokens)f.type==="text"&&(f.type="paragraph")}return o}}html(n){let t=this.rules.block.html.exec(n);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(n){let t=this.rules.block.def.exec(n);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:a,title:r}}}table(n){var o;let t=this.rules.block.table.exec(n);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=ui(t[1]),a=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===a.length){for(let s of a)this.rules.other.tableAlignRight.test(s)?i.align.push("right"):this.rules.other.tableAlignCenter.test(s)?i.align.push("center"):this.rules.other.tableAlignLeft.test(s)?i.align.push("left"):i.align.push(null);for(let s=0;s<e.length;s++)i.header.push({text:e[s],tokens:this.lexer.inline(e[s]),header:!0,align:i.align[s]});for(let s of r)i.rows.push(ui(s,i.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[c]})));return i}}lheading(n){let t=this.rules.block.lheading.exec(n);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(n){let t=this.rules.block.paragraph.exec(n);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(n){let t=this.rules.block.text.exec(n);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(n){let t=this.rules.inline.escape.exec(n);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(n){let t=this.rules.inline.tag.exec(n);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(n){let t=this.rules.inline.link.exec(n);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let i=Ke(e.slice(0,-1),"\\");if((e.length-i.length)%2===0)return}else{let i=Js(t[2],"()");if(i===-2)return;if(i>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let a=t[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(a);i&&(a=i[1],r=i[3])}else r=t[3]?t[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?a=a.slice(1):a=a.slice(1,-1)),mi(t,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(n,t){let e;if((e=this.rules.inline.reflink.exec(n))||(e=this.rules.inline.nolink.exec(n))){let a=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[a.toLowerCase()];if(!r){let i=e[0].charAt(0);return{type:"text",raw:i,text:i}}return mi(e,r,e[0],this.lexer,this.rules)}}emStrong(n,t,e=""){let a=this.rules.inline.emStrongLDelim.exec(n);if(!(!a||a[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!e||this.rules.inline.punctuation.exec(e))){let r=[...a[0]].length-1,i,o,s=r,l=0,c=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*n.length+r);(a=c.exec(t))!=null;){if(i=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!i)continue;if(o=[...i].length,a[3]||a[4]){s+=o;continue}else if((a[5]||a[6])&&r%3&&!((r+o)%3)){l+=o;continue}if(s-=o,s>0)continue;o=Math.min(o,o+s+l);let u=[...a[0]][0].length,f=n.slice(0,r+a.index+u+o);if(Math.min(r,o)%2){let k=f.slice(1,-1);return{type:"em",raw:f,text:k,tokens:this.lexer.inlineTokens(k)}}let d=f.slice(2,-2);return{type:"strong",raw:f,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(n){let t=this.rules.inline.code.exec(n);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return a&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(n){let t=this.rules.inline.br.exec(n);if(t)return{type:"br",raw:t[0]}}del(n){let t=this.rules.inline.del.exec(n);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(n){let t=this.rules.inline.autolink.exec(n);if(t){let e,a;return t[2]==="@"?(e=t[1],a="mailto:"+e):(e=t[1],a=e),{type:"link",raw:t[0],text:e,href:a,tokens:[{type:"text",raw:e,text:e}]}}}url(n){var e,a;let t;if(t=this.rules.inline.url.exec(n)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let o;do o=t[0],t[0]=(a=(e=this.rules.inline._backpedal.exec(t[0]))==null?void 0:e[0])!=null?a:"";while(o!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(n){let t=this.rules.inline.text.exec(n);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},ee=class wn{constructor(t){N(this,"tokens");N(this,"options");N(this,"state");N(this,"inlineQueue");N(this,"tokenizer");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ye,this.options.tokenizer=this.options.tokenizer||new Nt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:W,block:Ht.normal,inline:je.normal};this.options.pedantic?(e.block=Ht.pedantic,e.inline=je.pedantic):this.options.gfm&&(e.block=Ht.gfm,this.options.breaks?e.inline=je.breaks:e.inline=je.gfm),this.tokenizer.rules=e}static get rules(){return{block:Ht,inline:je}}static lex(t,e){return new wn(e).lex(t)}static lexInline(t,e){return new wn(e).inlineTokens(t)}lex(t){t=t.replace(W.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let a=this.inlineQueue[e];this.inlineTokens(a.src,a.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],a=!1){var r,i,o;for(this.options.pedantic&&(t=t.replace(W.tabCharGlobal,"    ").replace(W.spaceLine,""));t;){let s;if((i=(r=this.options.extensions)==null?void 0:r.block)!=null&&i.some(c=>(s=c.call({lexer:this},t,e))?(t=t.substring(s.raw.length),e.push(s),!0):!1))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);let c=e.at(-1);s.raw.length===1&&c!==void 0?c.raw+=`
`:e.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);let c=e.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.at(-1).src=c.text):e.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);let c=e.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},e.push(s));continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),e.push(s);continue}let l=t;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,u=t.slice(1),f;this.options.extensions.startBlock.forEach(d=>{f=d.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(s=this.tokenizer.paragraph(l))){let c=e.at(-1);a&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):e.push(s),a=l.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);let c=e.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):e.push(s);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){var l,c,u,f,d,k;let a=t,r=null;if(this.tokens.links){let g=Object.keys(this.tokens.links);if(g.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)g.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,r.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)i=r[2]?r[2].length:0,a=a.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);a=(u=(c=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:c.call({lexer:this},a))!=null?u:a;let o=!1,s="";for(;t;){o||(s=""),o=!1;let g;if((d=(f=this.options.extensions)==null?void 0:f.inline)!=null&&d.some(E=>(g=E.call({lexer:this},t,e))?(t=t.substring(g.raw.length),e.push(g),!0):!1))continue;if(g=this.tokenizer.escape(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.tag(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.link(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(g.raw.length);let E=e.at(-1);g.type==="text"&&(E==null?void 0:E.type)==="text"?(E.raw+=g.raw,E.text+=g.text):e.push(g);continue}if(g=this.tokenizer.emStrong(t,a,s)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.codespan(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.br(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.del(t)){t=t.substring(g.raw.length),e.push(g);continue}if(g=this.tokenizer.autolink(t)){t=t.substring(g.raw.length),e.push(g);continue}if(!this.state.inLink&&(g=this.tokenizer.url(t))){t=t.substring(g.raw.length),e.push(g);continue}let T=t;if((k=this.options.extensions)!=null&&k.startInline){let E=1/0,h=t.slice(1),b;this.options.extensions.startInline.forEach(C=>{b=C.call({lexer:this},h),typeof b=="number"&&b>=0&&(E=Math.min(E,b))}),E<1/0&&E>=0&&(T=t.substring(0,E+1))}if(g=this.tokenizer.inlineText(T)){t=t.substring(g.raw.length),g.raw.slice(-1)!=="_"&&(s=g.raw.slice(-1)),o=!0;let E=e.at(-1);(E==null?void 0:E.type)==="text"?(E.raw+=g.raw,E.text+=g.text):e.push(g);continue}if(t){let E="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(E);break}else throw new Error(E)}}return e}},Ft=class{constructor(n){N(this,"options");N(this,"parser");this.options=n||ye}space(n){return""}code({text:n,lang:t,escaped:e}){var i;let a=(i=(t||"").match(W.notSpaceStart))==null?void 0:i[0],r=n.replace(W.endingNewline,"")+`
`;return a?'<pre><code class="language-'+se(a)+'">'+(e?r:se(r,!0))+`</code></pre>
`:"<pre><code>"+(e?r:se(r,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:t}){return`<h${t}>${this.parser.parseInline(n)}</h${t}>
`}hr(n){return`<hr>
`}list(n){let t=n.ordered,e=n.start,a="";for(let o=0;o<n.items.length;o++){let s=n.items[o];a+=this.listitem(s)}let r=t?"ol":"ul",i=t&&e!==1?' start="'+e+'"':"";return"<"+r+i+`>
`+a+"</"+r+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let t="",e="";for(let r=0;r<n.header.length;r++)e+=this.tablecell(n.header[r]);t+=this.tablerow({text:e});let a="";for(let r=0;r<n.rows.length;r++){let i=n.rows[r];e="";for(let o=0;o<i.length;o++)e+=this.tablecell(i[o]);a+=this.tablerow({text:e})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+a+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let t=this.parser.parseInline(n.tokens),e=n.header?"th":"td";return(n.align?`<${e} align="${n.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${se(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:t,tokens:e}){let a=this.parser.parseInline(e),r=ci(n);if(r===null)return a;n=r;let i='<a href="'+n+'"';return t&&(i+=' title="'+se(t)+'"'),i+=">"+a+"</a>",i}image({href:n,title:t,text:e,tokens:a}){a&&(e=this.parser.parseInline(a,this.parser.textRenderer));let r=ci(n);if(r===null)return se(e);n=r;let i=`<img src="${n}" alt="${e}"`;return t&&(i+=` title="${se(t)}"`),i+=">",i}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:se(n.text)}},Hn=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},te=class xn{constructor(t){N(this,"options");N(this,"renderer");N(this,"textRenderer");this.options=t||ye,this.options.renderer=this.options.renderer||new Ft,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Hn}static parse(t,e){return new xn(e).parse(t)}static parseInline(t,e){return new xn(e).parseInline(t)}parse(t){var a,r;let e="";for(let i=0;i<t.length;i++){let o=t[i];if((r=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&r[o.type]){let l=o,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){e+=c||"";continue}}let s=o;switch(s.type){case"space":{e+=this.renderer.space(s);break}case"hr":{e+=this.renderer.hr(s);break}case"heading":{e+=this.renderer.heading(s);break}case"code":{e+=this.renderer.code(s);break}case"table":{e+=this.renderer.table(s);break}case"blockquote":{e+=this.renderer.blockquote(s);break}case"list":{e+=this.renderer.list(s);break}case"checkbox":{e+=this.renderer.checkbox(s);break}case"html":{e+=this.renderer.html(s);break}case"def":{e+=this.renderer.def(s);break}case"paragraph":{e+=this.renderer.paragraph(s);break}case"text":{e+=this.renderer.text(s);break}default:{let l='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return e}parseInline(t,e=this.renderer){var r,i;let a="";for(let o=0;o<t.length;o++){let s=t[o];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[s.type]){let c=this.options.extensions.renderers[s.type].call({parser:this},s);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){a+=c||"";continue}}let l=s;switch(l.type){case"escape":{a+=e.text(l);break}case"html":{a+=e.html(l);break}case"link":{a+=e.link(l);break}case"image":{a+=e.image(l);break}case"checkbox":{a+=e.checkbox(l);break}case"strong":{a+=e.strong(l);break}case"em":{a+=e.em(l);break}case"codespan":{a+=e.codespan(l);break}case"br":{a+=e.br(l);break}case"del":{a+=e.del(l);break}case"text":{a+=e.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return a}},Rt,Ve=(Rt=class{constructor(n){N(this,"options");N(this,"block");this.options=n||ye}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?ee.lex:ee.lexInline}provideParser(){return this.block?te.parse:te.parseInline}},N(Rt,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),N(Rt,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Rt),tl=class{constructor(...n){N(this,"defaults",Cn());N(this,"options",this.setOptions);N(this,"parse",this.parseMarkdown(!0));N(this,"parseInline",this.parseMarkdown(!1));N(this,"Parser",te);N(this,"Renderer",Ft);N(this,"TextRenderer",Hn);N(this,"Lexer",ee);N(this,"Tokenizer",Nt);N(this,"Hooks",Ve);this.use(...n)}walkTokens(n,t){var a,r;let e=[];for(let i of n)switch(e=e.concat(t.call(this,i)),i.type){case"table":{let o=i;for(let s of o.header)e=e.concat(this.walkTokens(s.tokens,t));for(let s of o.rows)for(let l of s)e=e.concat(this.walkTokens(l.tokens,t));break}case"list":{let o=i;e=e.concat(this.walkTokens(o.items,t));break}default:{let o=i;(r=(a=this.defaults.extensions)==null?void 0:a.childTokens)!=null&&r[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{let l=o[s].flat(1/0);e=e.concat(this.walkTokens(l,t))}):o.tokens&&(e=e.concat(this.walkTokens(o.tokens,t)))}}return e}use(...n){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(e=>{let a={...e};if(a.async=this.defaults.async||a.async||!1,e.extensions&&(e.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=t.renderers[r.name];i?t.renderers[r.name]=function(...o){let s=r.renderer.apply(this,o);return s===!1&&(s=i.apply(this,o)),s}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=t[r.level];i?i.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),a.extensions=t),e.renderer){let r=this.defaults.renderer||new Ft(this.defaults);for(let i in e.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let o=i,s=e.renderer[o],l=r[o];r[o]=(...c)=>{let u=s.apply(r,c);return u===!1&&(u=l.apply(r,c)),u||""}}a.renderer=r}if(e.tokenizer){let r=this.defaults.tokenizer||new Nt(this.defaults);for(let i in e.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let o=i,s=e.tokenizer[o],l=r[o];r[o]=(...c)=>{let u=s.apply(r,c);return u===!1&&(u=l.apply(r,c)),u}}a.tokenizer=r}if(e.hooks){let r=this.defaults.hooks||new Ve;for(let i in e.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let o=i,s=e.hooks[o],l=r[o];Ve.passThroughHooks.has(i)?r[o]=c=>{if(this.defaults.async&&Ve.passThroughHooksRespectAsync.has(i))return(async()=>{let f=await s.call(r,c);return l.call(r,f)})();let u=s.call(r,c);return l.call(r,u)}:r[o]=(...c)=>{if(this.defaults.async)return(async()=>{let f=await s.apply(r,c);return f===!1&&(f=await l.apply(r,c)),f})();let u=s.apply(r,c);return u===!1&&(u=l.apply(r,c)),u}}a.hooks=r}if(e.walkTokens){let r=this.defaults.walkTokens,i=e.walkTokens;a.walkTokens=function(o){let s=[];return s.push(i.call(this,o)),r&&(s=s.concat(r.call(this,o))),s}}this.defaults={...this.defaults,...a}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,t){return ee.lex(n,t!=null?t:this.defaults)}parser(n,t){return te.parse(n,t!=null?t:this.defaults)}parseMarkdown(n){return(t,e)=>{let a={...e},r={...this.defaults,...a},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&a.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=n),r.async)return(async()=>{let o=r.hooks?await r.hooks.preprocess(t):t,s=await(r.hooks?await r.hooks.provideLexer():n?ee.lex:ee.lexInline)(o,r),l=r.hooks?await r.hooks.processAllTokens(s):s;r.walkTokens&&await Promise.all(this.walkTokens(l,r.walkTokens));let c=await(r.hooks?await r.hooks.provideParser():n?te.parse:te.parseInline)(l,r);return r.hooks?await r.hooks.postprocess(c):c})().catch(i);try{r.hooks&&(t=r.hooks.preprocess(t));let o=(r.hooks?r.hooks.provideLexer():n?ee.lex:ee.lexInline)(t,r);r.hooks&&(o=r.hooks.processAllTokens(o)),r.walkTokens&&this.walkTokens(o,r.walkTokens);let s=(r.hooks?r.hooks.provideParser():n?te.parse:te.parseInline)(o,r);return r.hooks&&(s=r.hooks.postprocess(s)),s}catch(o){return i(o)}}}onError(n,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let a="<p>An error occurred:</p><pre>"+se(e.message+"",!0)+"</pre>";return t?Promise.resolve(a):a}if(t)return Promise.reject(e);throw e}}},be=new tl;function w(n,t){return be.parse(n,t)}w.options=w.setOptions=function(n){return be.setOptions(n),w.defaults=be.defaults,di(w.defaults),w};w.getDefaults=Cn;w.defaults=ye;w.use=function(...n){return be.use(...n),w.defaults=be.defaults,di(w.defaults),w};w.walkTokens=function(n,t){return be.walkTokens(n,t)};w.parseInline=be.parseInline;w.Parser=te;w.parser=te.parse;w.Renderer=Ft;w.TextRenderer=Hn;w.Lexer=ee;w.lexer=ee.lex;w.Tokenizer=Nt;w.Hooks=Ve;w.parse=w;var uu=w.options,mu=w.setOptions,du=w.use,hu=w.walkTokens,pu=w.parseInline;var fu=te.parse,gu=ee.lex;var nl=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:？！。，：]|$)/,al=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,rl=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function Rn(n={}){return{extensions:[il(n,xi(n,!1)),ol(n,xi(n,!0))]}}function xi(n,t){return e=>{try{let a=typeof window!="undefined"&&window.katex?window.katex:null;if(a&&typeof a.renderToString=="function")try{return a.renderToString(e.text,{...n,displayMode:e.displayMode})+(t?`
`:"")}catch(r){}}catch(a){}return e.raw+(t?`
`:"")}}function il(n,t){let e=n&&n.nonStandard,a=e?al:nl;return{name:"inlineKatex",level:"inline",start(r){let i,o=r;for(;o;){if(i=o.indexOf("$"),i===-1)return;if((e?i>-1:i===0||o.charAt(i-1)===" ")&&o.substring(i).match(a))return i;o=o.substring(i+1).replace(/^\$+/,"")}},tokenizer(r,i){let o=r.match(a);if(o)return{type:"inlineKatex",raw:o[0],text:o[2].trim(),displayMode:o[1].length===2}},renderer:t}}function ol(n,t){return{name:"blockKatex",level:"block",tokenizer(e,a){let r=e.match(rl);if(r)return{type:"blockKatex",raw:r[0],text:r[2].trim(),displayMode:r[1].length===2}},renderer:t}}var Dt=null;try{w&&typeof w.use=="function"&&typeof Rn=="function"&&w.use(Rn({throwOnError:!1}))}catch(n){}try{let n=window==null?void 0:window.hljs;w&&typeof w.setOptions=="function"&&w.setOptions({highlight:(t,e)=>{try{if(n){if(e&&n.getLanguage&&n.getLanguage(e))return n.highlight(t,{language:e}).value;if(n.highlightAuto)return n.highlightAuto(t).value}}catch(a){}return t}})}catch(n){}function In(n){try{let t=window==null?void 0:window.hljs;if(!t)return;Array.from(n.querySelectorAll("pre code")).forEach(a=>{try{if(typeof t.highlightElement=="function")t.highlightElement(a);else{let i=(a.className||"").match(/language-([a-z0-9-]+)/i),o=i&&i[1]||"",s=a.textContent||"";o&&t.getLanguage&&t.getLanguage(o)?a.innerHTML=t.highlight(s,{language:o}).value:t.highlightAuto&&(a.innerHTML=t.highlightAuto(s).value)}}catch(r){}})}catch(t){}}async function sl(){var n;try{await fetch("/api/notification/pushMsg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({msg:(n=Dt==null?void 0:Dt.i18n)==null?void 0:n.mergedSideMemoEditTip,timeout:3e3})})}catch(t){}}async function Ci(){try{let n=document.head,t=(o,s)=>{try{if(document.getElementById(o))return;let l=document.createElement("link");l.id=o,l.rel="stylesheet",l.type="text/css",l.href=s,n.appendChild(l)}catch(l){}},e=(o,s)=>new Promise((l,c)=>{try{if(document.getElementById(o)){l();return}let u=document.createElement("script");u.id=o,u.src=s,u.async=!0,u.onload=()=>{try{l()}catch(f){}},u.onerror=()=>{try{c()}catch(f){}},n.appendChild(u)}catch(u){c(u)}}),a=!window.katex,r=!window.hljs;if(!a&&!r)return!0;let i=[];a&&(i.push({type:"link",id:"protyleKatexStyle",href:"/stage/protyle/js/katex/katex.min.css?v=0.16.9"}),i.push({type:"script",id:"protyleKatexScript",src:"/stage/protyle/js/katex/katex.min.js?v=0.16.9"}),i.push({type:"script",id:"protyleKatexMhchemScript",src:"/stage/protyle/js/katex/mhchem.min.js?v=0.16.9"})),r&&(i.push({type:"link",id:"protyleHljsStyle",href:"/stage/protyle/js/highlight.js/styles/github.min.css?v=11.11.1"}),i.push({type:"script",id:"protyleHljsScript",src:"/stage/protyle/js/highlight.js/highlight.min.js?v=11.11.1"}));for(let o of i)try{o.type==="link"?t(o.id,o.href):await e(o.id,o.src)}catch(s){}}catch(n){}return window.katex!==void 0||window.hljs!==void 0}var Fn="config.json",$n="asri-enhance-side-memo",Le=null;function Nn(n){try{if(!n||n.__asriNoRightClickAttached)return;n.__asriNoRightClickAttached=!0;let t=e=>{try{if(e.type==="contextmenu"){e.preventDefault(),e.stopPropagation();return}let a=e;if(typeof a.button=="number"&&a.button===2){try{a.preventDefault()}catch(r){}try{a.stopPropagation()}catch(r){}}}catch(a){}};try{n.addEventListener("contextmenu",t,{capture:!0,passive:!1}),n.addEventListener("mousedown",t,{capture:!0,passive:!1}),n.addEventListener("mouseup",t,{capture:!0,passive:!1})}catch(e){}}catch(t){}}function me(){Array.from(document.querySelectorAll(".protyle-title")).forEach(r=>{try{let i=r.getBoundingClientRect().height;r.style.setProperty("--asri-enhance-sidememo-title-height",`${i}px`)}catch(i){}});let t=document.documentElement,e=!!(t&&t.hasAttribute("data-asri-enhance-side-memo"));if(Array.from(document.querySelectorAll(".protyle-content")).forEach(r=>{try{let i=r.querySelector('[data-type*="inline-memo"], [memo]')!==null;e&&i?(r.classList.add("asri-enhance-sidememo"),r.classList.remove("asri-enhance-sidememo-none")):e&&!i?(r.classList.remove("asri-enhance-sidememo"),r.classList.add("asri-enhance-sidememo-none")):(r.classList.remove("asri-enhance-sidememo"),r.classList.remove("asri-enhance-sidememo-none"))}catch(i){}}),e)Ue();else try{Array.from(document.querySelectorAll(".asri-enhance-sidememo-container")).forEach(i=>{try{i.remove()}catch(o){}})}catch(r){}}function Ue(){if(Array.from(document.querySelectorAll(".asri-enhance-sidememo .protyle-top .protyle-title")).forEach(e=>{try{let a=e.querySelector(".asri-enhance-sidememo-container");a||(a=document.createElement("div"),a.className="asri-enhance-sidememo-container protyle-custom",e.appendChild(a));try{let i=e.closest(".protyle-top");i&&(e.classList.contains("fn__none")?i.classList.add("asri-enhance-sidememo-protyle-title-none"):i.classList.remove("asri-enhance-sidememo-protyle-title-none"))}catch(i){}try{Nn(a)}catch(i){}try{let i=getComputedStyle(e).position;(!i||i==="static")&&(e.style.position="relative")}catch(i){}let r=e.closest(".protyle-content");if(r){ll(a,r);try{Nn(a)}catch(i){}}}catch(a){}}),Array.from(document.querySelectorAll(".protyle-top .protyle-title > .asri-enhance-sidememo-container")).forEach(e=>{let a=e.parentElement;if(a)if(a.closest(".asri-enhance-sidememo"))try{Nn(e)}catch(r){}else try{try{let r=a.closest(".protyle-top");r&&r.classList.remove("asri-enhance-sidememo-protyle-title-none")}catch(r){}e.remove()}catch(r){}}),!Le){Le=e=>{try{let a=e.target;if(!a||!a.closest)return;let r=a.closest(".asri-enhance-sidememo-inlinememo-item-title, .asri-enhance-sidememo-blockmemo-item-title, .asri-enhance-sidememo-filememo-item-title");if(!r)return;let i=r.closest(".asri-enhance-sidememo-inlinememo-item, .asri-enhance-sidememo-blockmemo-item, .asri-enhance-sidememo-filememo-item");if(!i)return;try{e.preventDefault(),e.stopPropagation()}catch(o){}try{let o=i.classList.toggle("asri-enhance-sidememo-item-fold");try{let s=i.getAttribute("asri-enhance-sidememo-uid");if(s){let l=`[data-type*="inline-memo"][asri-enhance-sidememo-uid="${s}"], [memo][asri-enhance-sidememo-uid="${s}"]`;Array.from(document.querySelectorAll(l)).forEach(u=>{if(u&&u.setAttribute)if(o)u.setAttribute("asri-enhance-sidememo-fold","true");else try{u.removeAttribute("asri-enhance-sidememo-fold")}catch(f){}})}}catch(s){}try{me(),Ue()}catch(s){}}catch(o){}}catch(a){}};try{document.addEventListener("contextmenu",Le,!0)}catch(e){}}}function ll(n,t){for(Array.from(t.querySelectorAll('[data-type*="inline-memo"], [memo]')).forEach(h=>{try{let b=h.__asriSidememoHandlers;b&&(b.enter&&h.removeEventListener("mouseenter",b.enter),b.leave&&h.removeEventListener("mouseleave",b.leave),delete h.__asriSidememoHandlers)}catch(b){}});n.firstChild;){let h=n.firstChild;try{let b=h.__asriSidememoHandlers;if(b){b.enter&&h.removeEventListener("mouseenter",b.enter),b.leave&&h.removeEventListener("mouseleave",b.leave),b.click&&h.removeEventListener("click",b.click),b.mousedown&&h.removeEventListener("mousedown",b.mousedown),b._preMove&&document.removeEventListener("mousemove",b._preMove),b._preUp&&document.removeEventListener("mouseup",b._preUp),b._dragMove&&document.removeEventListener("mousemove",b._dragMove),b._dragUp&&document.removeEventListener("mouseup",b._dragUp),b._timer&&clearTimeout(b._timer);try{b._asriContainer&&b._asriContainer.classList.remove("asri-enhance-sidememo-container-resize"),b._asriParent&&b._asriParent.classList.remove("asri-enhance-sidememo-container-resize")}catch(C){}delete h.__asriSidememoHandlers}}catch(b){}n.removeChild(h)}let a=Array.from(t.querySelectorAll('[data-type*="inline-memo"], [memo]')),r=[],i=a.filter(h=>{var b;return h.hasAttribute("data-type")&&((b=h.getAttribute("data-type"))==null?void 0:b.split(/\s+/).includes("inline-memo"))&&!h.closest(".av__gallery-content")}),o=new Set,s=[];i.forEach((h,b)=>{if(o.has(h))return;let C=h.getAttribute("data-inline-memo-content")||"",A=[h];o.add(h);for(let _=b+1;_<i.length;_++){let P=i[_];if(o.has(P))continue;let $=P.getAttribute("data-inline-memo-content")||"";if(C===$&&c(A[A.length-1],P))A.push(P),o.add(P);else break}s.push({elements:A,content:C})});function l(h){return h?/^[\u200B\u200C\u200D\u200E\u200F\uFEFF]*$/.test(h):!0}function c(h,b){if(!h.parentElement||!b.parentElement||h.parentElement!==b.parentElement)return!1;let C=Array.from(h.parentElement.childNodes),A=C.indexOf(h),_=C.indexOf(b);if(_<=A)return!1;for(let P=A+1;P<_;P++){let $=C[P];if($.nodeType===Node.TEXT_NODE){let x=$.textContent||"";if(!l(x))return!1}if($.nodeType===Node.ELEMENT_NODE)return!1}return!0}let u=a.filter(h=>h.hasAttribute("memo")&&!h.classList.contains("protyle-wysiwyg")),f=a.filter(h=>h.hasAttribute("memo")&&h.classList.contains("protyle-wysiwyg")),d=[...s,...u,...f];d.sort((h,b)=>{let C,A;"elements"in h?C=h.elements[0]:C=h,"elements"in b?A=b.elements[0]:A=b;let _=C.compareDocumentPosition(A);return _&Node.DOCUMENT_POSITION_FOLLOWING?-1:_&Node.DOCUMENT_POSITION_PRECEDING?1:0}),d.forEach((h,b)=>{var C,A;try{let _="elements"in h,P=h instanceof HTMLElement&&h.hasAttribute("memo")&&!h.classList.contains("protyle-wysiwyg"),$=h instanceof HTMLElement&&h.hasAttribute("memo")&&h.classList.contains("protyle-wysiwyg");if(_){let{elements:x,content:R}=h,F=x.map(v=>(v.textContent||"").trim()).join(""),L=document.createElement("div");L.className="asri-enhance-sidememo-inlinememo-item",L.style.position="absolute";let z=document.createElement("div");z.className="asri-enhance-sidememo-inlinememo-item-title",z.textContent=F;let I=document.createElement("div");I.className="asri-enhance-sidememo-inlinememo-item-content";try{let v=typeof w=="function"?w(R):w&&(w.parse||w.default)?w.parse?w.parse(R):w.default?w.default(R):R:R;I.innerHTML=v;try{In(I)}catch(S){}}catch(v){I.textContent=R}L.appendChild(z),L.appendChild(I);try{x.some(v=>v.getAttribute&&v.getAttribute("asri-enhance-sidememo-fold")==="true")&&L.classList.add("asri-enhance-sidememo-item-fold")}catch(v){}let M=0;try{let v=x[0].getBoundingClientRect(),S=(C=n.parentElement)==null?void 0:C.getBoundingClientRect();if(S)M=Math.max(0,v.top-S.bottom+4);else{let B=t.getBoundingClientRect();M=Math.max(0,v.top-B.top)}}catch(v){}let m=x[0].getAttribute("asri-enhance-sidememo-uid");if(!m){m=`asri-enhance-sidememo-${Math.random().toString(36).slice(2,10)}${Date.now().toString(36)}`;try{x.forEach(v=>v.setAttribute("asri-enhance-sidememo-uid",m))}catch(v){}}L.setAttribute("asri-enhance-sidememo-uid",m),L.style.top=`${M}px`,r.push({el:L,top:M,height:0,uid:m,sourceEls:x,index:b,type:"inline"})}else if(P){let x=h,R=(x.textContent||"").trim(),F=x.getAttribute("memo")||"",L=document.createElement("div");L.className="asri-enhance-sidememo-blockmemo-item",L.style.position="absolute";let z=document.createElement("div");z.className="asri-enhance-sidememo-blockmemo-item-title",z.textContent=R;let I=document.createElement("div");I.className="asri-enhance-sidememo-blockmemo-item-content";try{let v=typeof w=="function"?w(F):w&&(w.parse||w.default)?w.parse?w.parse(F):w.default?w.default(F):F:F;I.innerHTML=v;try{In(I)}catch(S){}}catch(v){I.textContent=F}L.appendChild(z),L.appendChild(I);try{x.getAttribute&&x.getAttribute("asri-enhance-sidememo-fold")==="true"&&L.classList.add("asri-enhance-sidememo-item-fold")}catch(v){}let M=0;try{let v=x.getBoundingClientRect(),S=(A=n.parentElement)==null?void 0:A.getBoundingClientRect();if(S)M=Math.max(0,v.top-S.bottom+4);else{let B=t.getBoundingClientRect();M=Math.max(0,v.top-B.top)}}catch(v){}let m=x.getAttribute("asri-enhance-sidememo-uid");if(!m){m=`asri-enhance-sidememo-${Math.random().toString(36).slice(2,10)}${Date.now().toString(36)}`;try{x.setAttribute("asri-enhance-sidememo-uid",m)}catch(v){}}L.setAttribute("asri-enhance-sidememo-uid",m),L.style.top=`${M}px`,r.push({el:L,top:M,height:0,uid:m,sourceEl:x,index:b,type:"block"})}else if($){let x=h,R="";try{let v=x.previousElementSibling;if(v&&v.classList.contains("protyle-top")){let S=v.querySelector(".protyle-title .protyle-title__input");S&&(R=(S.textContent||"").trim())}}catch(v){}R||(R=(x.textContent||"").trim());let F=x.getAttribute("memo")||"",L=document.createElement("div");L.className="asri-enhance-sidememo-filememo-item",L.style.position="absolute";let z=document.createElement("div");z.className="asri-enhance-sidememo-filememo-item-title",z.textContent=R;let I=document.createElement("div");I.className="asri-enhance-sidememo-filememo-item-content";try{let v=typeof w=="function"?w(F):w&&(w.parse||w.default)?w.parse?w.parse(F):w.default?w.default(F):F:F;I.innerHTML=v;try{In(I)}catch(S){}}catch(v){I.textContent=F}L.appendChild(z),L.appendChild(I);try{x.getAttribute&&x.getAttribute("asri-enhance-sidememo-fold")==="true"&&L.classList.add("asri-enhance-sidememo-item-fold")}catch(v){}let M=20,m=x.getAttribute("asri-enhance-sidememo-uid");if(!m){m=`asri-enhance-sidememo-${Math.random().toString(36).slice(2,10)}${Date.now().toString(36)}`;try{x.setAttribute("asri-enhance-sidememo-uid",m)}catch(v){}}L.setAttribute("asri-enhance-sidememo-uid",m),L.style.top=`${M}px`,r.push({el:L,top:M,height:0,uid:m,sourceEl:x,index:b,type:"file"})}}catch(_){}});let k=document.createDocumentFragment();r.forEach(h=>k.appendChild(h.el)),n.appendChild(k),r.forEach(h=>{try{h.height=Math.ceil(h.el.getBoundingClientRect().height)}catch(b){h.height=0}});let g=8,T=0;r.forEach(h=>{let b=Math.max(0,h.top),C=Math.max(b,T);h.el.style.top=`${C}px`,T=C+h.height+g});let E=(h,b)=>{try{if(!h)return;let C=h.hasAttribute&&h.getAttribute("data-type")==="inline-memo",A=h.hasAttribute("memo")&&h.classList.contains("protyle-wysiwyg");if(!C&&!A)return;if(b)try{if(h.getAttribute&&h.getAttribute("asri-enhance-sidememo-fold")==="true")return}catch(R){}let _=h.closest(".protyle-wysiwyg");if(!_)return;let P=_.previousElementSibling;if(!P||!P.classList||!P.classList.contains("protyle-top")||P.classList.contains("asri-enhance-sidememo-protyle-title-none")||!_.closest(".asri-enhance-sidememo"))return;let x=document.querySelector(".tooltip--memo#tooltip");if(!x)return;try{b?x.classList.add("asri-enhance-sidememo-tooltip-memo-none"):x.classList.remove("asri-enhance-sidememo-tooltip-memo-none")}catch(R){}}catch(C){}};r.forEach(h=>{try{let b=h.sourceEls||(h.sourceEl?[h.sourceEl]:[]);if(b.length===0)return;let C=()=>{b.forEach(x=>x.classList.add("asri-enhance-sidememo-highlight"))},A=()=>{b.forEach(x=>x.classList.remove("asri-enhance-sidememo-highlight"))},_=()=>{h.el.classList.add("asri-enhance-sidememo-highlight");try{b.forEach(x=>E(x,!0))}catch(x){}},P=()=>{h.el.classList.remove("asri-enhance-sidememo-highlight");try{b.forEach(x=>E(x,!1))}catch(x){}};h.el.addEventListener("mouseenter",C),h.el.addEventListener("mouseleave",A),b.forEach(x=>{x.addEventListener("mouseenter",_),x.addEventListener("mouseleave",P)});let $=x=>{if(x.button!==0)return;let R=x.clientX,F=x.clientY,L=m=>{R=m.clientX,F=m.clientY,(Math.abs(m.clientX-x.clientX)>6||Math.abs(m.clientY-x.clientY)>6)&&(h.el.__asriSidememoHandlers&&h.el.__asriSidememoHandlers._timer&&(clearTimeout(h.el.__asriSidememoHandlers._timer),h.el.__asriSidememoHandlers._timer=null),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",z))},z=()=>{h.el.__asriSidememoHandlers&&h.el.__asriSidememoHandlers._timer&&(clearTimeout(h.el.__asriSidememoHandlers._timer),h.el.__asriSidememoHandlers._timer=null),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",z);let I=window.setTimeout(()=>{var Ya;document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",z);let m=R,v=(Ya=b[0])==null?void 0:Ya.closest(".asri-enhance-sidememo");if(!v)return;let S=n;try{S.classList.add("asri-enhance-sidememo-container-resize")}catch(Z){}let B=getComputedStyle(v).getPropertyValue("--asri-enhance-sidememo-container-width")||"",Y=Math.max(50,Math.min(600,Math.round(parseFloat(B)||200))),V=null,K=null,X=null,$e=null;V=Z=>{try{let fe=Math.round(Y+(m-Z.clientX));$e=Math.max(50,Math.min(600,fe)),X===null&&(X=requestAnimationFrame(()=>{try{$e!==null&&v.style.setProperty("--asri-enhance-sidememo-container-width",`${$e}px`)}catch(Yl){}X=null,$e=null}))}catch(fe){}},K=()=>{try{V&&document.removeEventListener("mousemove",V),K&&document.removeEventListener("mouseup",K)}catch(fe){}try{X!==null&&(cancelAnimationFrame(X),X=null,$e=null)}catch(fe){}let Z=h.el.__asriSidememoHandlers;if(Z){try{Z._asriContainer&&Z._asriContainer.classList.remove("asri-enhance-sidememo-container-resize"),Z._asriParent&&Z._asriParent.classList.remove("asri-enhance-sidememo-container-resize")}catch(fe){}Z._dragMove=null,Z._dragUp=null,Z._asriParent=null,Z._asriContainer=null}try{setTimeout(()=>{try{me(),Ue()}catch(fe){}},200)}catch(fe){}};let Oe=h.el.__asriSidememoHandlers||{};Oe._dragMove=V,Oe._dragUp=K,Oe._asriParent=v,Oe._asriContainer=S,h.el.__asriSidememoHandlers=Oe,document.addEventListener("mousemove",V),document.addEventListener("mouseup",K)},300),M=h.el.__asriSidememoHandlers||{};M._preMove=L,M._preUp=z,M._timer=I,h.el.__asriSidememoHandlers=M};try{let x=h.el.querySelector(".asri-enhance-sidememo-inlinememo-item-title, .asri-enhance-sidememo-blockmemo-item-title, .asri-enhance-sidememo-filememo-item-title");if(x){let R=I=>{try{I.preventDefault(),I.stopPropagation()}catch(M){}try{if(h.type==="file"){let v=b[0];try{let S=v.previousElementSibling;if(S&&S.classList.contains("protyle-top")){let B=S.querySelector(".protyle-title .protyle-attr--memo");if(B){let Y=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,button:0});B.dispatchEvent(Y);return}}}catch(S){}}let M=b[0],m=b.length>1;if(M!=null&&M.hasAttribute&&M.hasAttribute("memo")){let v=null;try{let K=M.querySelector(":scope > .protyle-attr");K&&(v=K.querySelector(".protyle-attr--memo"))}catch(K){v=null}let S=(v!=null?v:M).getBoundingClientRect(),B=Math.round(S.left+S.width/2),Y=Math.round(S.top+S.height/2),V=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,button:0,clientX:B,clientY:Y});try{v?v.dispatchEvent(V):M.dispatchEvent(V)}catch(K){}}else if(m)sl().catch(()=>{});else{let v=M.getBoundingClientRect(),S=Math.round(v.left+v.width/2),B=Math.round(v.top+v.height/2),Y=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,clientX:S,clientY:B});try{M.dispatchEvent(Y)}catch(V){}}}catch(M){}};x.addEventListener("click",R);let F=I=>{try{I.preventDefault(),I.stopPropagation()}catch(M){}try{let M=h.el.classList.toggle("asri-enhance-sidememo-item-fold");try{let m=h.el.getAttribute("asri-enhance-sidememo-uid");if(m){let v=`[data-type*="inline-memo"][asri-enhance-sidememo-uid="${m}"], [memo][asri-enhance-sidememo-uid="${m}"]`;Array.from(document.querySelectorAll(v)).forEach(B=>{if(B&&B.setAttribute)if(M)B.setAttribute("asri-enhance-sidememo-fold","true");else try{B.removeAttribute("asri-enhance-sidememo-fold")}catch(Y){}})}}catch(m){}}catch(M){}try{me(),Ue()}catch(M){}};x.addEventListener("contextmenu",F);let L=h.el.__asriSidememoHandlers||{},z=Object.assign(L,{enter:C,leave:A,click:R,titleRightClick:F,mousedown:$});h.el.__asriSidememoHandlers=z,h.el.addEventListener("mousedown",$)}else{let R=h.el.__asriSidememoHandlers||{},F=Object.assign(R,{enter:C,leave:A,mousedown:$});h.el.__asriSidememoHandlers=F,h.el.addEventListener("mousedown",$)}}catch(x){let R=h.el.__asriSidememoHandlers||{},F=Object.assign(R,{enter:C,leave:A,mousedown:$});h.el.__asriSidememoHandlers=F,h.el.addEventListener("mousedown",$)}try{b.forEach(x=>{x.__asriSidememoHandlers={enter:_,leave:P}})}catch(x){}}catch(b){}})}var Me=null;function qt(){try{if(Le){try{document.removeEventListener("contextmenu",Le,!0)}catch(l){}Le=null}Array.from(document.querySelectorAll(".asri-enhance-sidememo-container")).forEach(l=>{try{Array.from(l.children).forEach(c=>{try{let u=c.__asriSidememoHandlers;if(u){if(u.enter&&c.removeEventListener("mouseenter",u.enter),u.leave&&c.removeEventListener("mouseleave",u.leave),u.click&&c.removeEventListener("click",u.click),u.mousedown&&c.removeEventListener("mousedown",u.mousedown),u._preMove&&document.removeEventListener("mousemove",u._preMove),u._preUp&&document.removeEventListener("mouseup",u._preUp),u._dragMove&&document.removeEventListener("mousemove",u._dragMove),u._dragUp&&document.removeEventListener("mouseup",u._dragUp),u.titleRightClick)try{let f=c.querySelector(".asri-enhance-sidememo-inlinememo-item-title, .asri-enhance-sidememo-blockmemo-item-title, .asri-enhance-sidememo-filememo-item-title");f&&f.removeEventListener("contextmenu",u.titleRightClick)}catch(f){}if(u._timer&&clearTimeout(u._timer),u._asriContainer)try{u._asriContainer.classList.remove("asri-enhance-sidememo-container-resize")}catch(f){}if(u._asriParent)try{u._asriParent.classList.remove("asri-enhance-sidememo-container-resize")}catch(f){}delete c.__asriSidememoHandlers}}catch(u){}});try{l.remove()}catch(c){}}catch(c){}}),Array.from(document.querySelectorAll(".protyle-content")).forEach(l=>{try{l.classList.remove("asri-enhance-sidememo"),l.classList.remove("asri-enhance-sidememo-none"),Array.from(l.querySelectorAll('[data-type*="inline-memo"], [memo]')).forEach(u=>{try{let f=u.__asriSidememoHandlers;f&&(f.enter&&u.removeEventListener("mouseenter",f.enter),f.leave&&u.removeEventListener("mouseleave",f.leave),delete u.__asriSidememoHandlers);try{u.removeAttribute("asri-enhance-sidememo-uid")}catch(d){}try{u.classList.remove("asri-enhance-sidememo-highlight")}catch(d){}}catch(f){}})}catch(c){}}),Array.from(document.querySelectorAll(".asri-enhance-sidememo-container-resize")).forEach(l=>{try{l.classList.remove("asri-enhance-sidememo-container-resize")}catch(c){}}),Array.from(document.querySelectorAll(".protyle-title")).forEach(l=>{try{l.style.removeProperty("--asri-enhance-sidememo-title-height")}catch(c){}}),Array.from(document.querySelectorAll(".protyle-top")).forEach(l=>{try{l.classList.remove("asri-enhance-sidememo-protyle-title-none")}catch(c){}});let i=Array.from(document.querySelectorAll(".asri-enhance-sidememo"));i.forEach(l=>{try{l.style.removeProperty("--asri-enhance-sidememo-container-width")}catch(c){}}),i.forEach(l=>{try{l.classList.remove("asri-enhance-sidememo")}catch(c){}}),Array.from(document.querySelectorAll('[data-type*="inline-memo"][asri-enhance-sidememo-fold], [memo][asri-enhance-sidememo-fold]')).forEach(l=>{try{l.removeAttribute("asri-enhance-sidememo-fold")}catch(c){}}),Array.from(document.querySelectorAll(".tooltip--memo#tooltip")).forEach(l=>{try{l.classList.remove("asri-enhance-sidememo-tooltip-memo-none")}catch(c){}})}catch(n){}}async function Ti(){if(!Me)try{let n=_t(/setUILayout|transactions|setBlockAttrs|getDoc|renameDoc/,t=>{try{setTimeout(()=>{try{me(),Ue()}catch(e){}},200)}catch(e){}});Me=()=>{try{n.disconnect()}catch(t){}Me=null}}catch(n){}}function Bt(){if(Me){try{Me()}catch(n){}Me=null}}async function _i(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-side-memo"),r=await p(n,Fn)||{};a?(e.removeAttribute("data-asri-enhance-side-memo"),r[$n]=!1,qt(),me(),Bt()):(e.setAttribute("data-asri-enhance-side-memo","true"),r[$n]=!0,await Ci().catch(()=>{}),me(),Ti().catch(()=>{})),await y(n,Fn,r).catch(()=>{})}async function Ai(n,t){Dt=n;let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Fn);a&&a[$n]===!0?(e.setAttribute("data-asri-enhance-side-memo","true"),await Ci().catch(()=>{}),me(),Ti().catch(()=>{})):(e.removeAttribute("data-asri-enhance-side-memo"),qt(),me(),Bt())}var On="config.json",Dn="asri-enhance-global-frosted-glass";async function Li(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-global-frosted-glass"),r=await p(n,On)||{};a?(e.removeAttribute("data-asri-enhance-global-frosted-glass"),r[Dn]=!1):(e.setAttribute("data-asri-enhance-global-frosted-glass","true"),r[Dn]=!0),await y(n,On,r).catch(()=>{})}async function Mi(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,On);a&&a[Dn]===!0?e.setAttribute("data-asri-enhance-global-frosted-glass","true"):e.removeAttribute("data-asri-enhance-global-frosted-glass")}var qn="config.json",Bn="asri-enhance-sidebar-top-sticky";async function Pi(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-sidebar-top-sticky"),r=await p(n,qn)||{};a?(e.removeAttribute("data-asri-enhance-sidebar-top-sticky"),r[Bn]=!1):(e.setAttribute("data-asri-enhance-sidebar-top-sticky","true"),r[Bn]=!0),await y(n,qn,r).catch(()=>{})}async function Si(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,qn);a&&a[Bn]===!0?e.setAttribute("data-asri-enhance-sidebar-top-sticky","true"):e.removeAttribute("data-asri-enhance-sidebar-top-sticky")}var zn="config.json",Gn="asri-enhance-hide-tab";async function Hi(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-hide-tab"),r=await p(n,zn)||{};a?(e.removeAttribute("data-asri-enhance-hide-tab"),r[Gn]=!1):(e.setAttribute("data-asri-enhance-hide-tab","true"),r[Gn]=!0),await y(n,zn,r).catch(()=>{})}async function Ri(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,zn);a&&a[Gn]===!0?e.setAttribute("data-asri-enhance-hide-tab","true"):e.removeAttribute("data-asri-enhance-hide-tab")}var jn="config.json",Kn="asri-enhance-hide-breadcrumb";async function Ii(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-hide-breadcrumb"),r=await p(n,jn)||{};a?(e.removeAttribute("data-asri-enhance-hide-breadcrumb"),r[Kn]=!1):(e.setAttribute("data-asri-enhance-hide-breadcrumb","true"),r[Kn]=!0),await y(n,jn,r).catch(()=>{})}async function Ni(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,jn);a&&a[Kn]===!0?e.setAttribute("data-asri-enhance-hide-breadcrumb","true"):e.removeAttribute("data-asri-enhance-hide-breadcrumb")}var Vn="config.json",Wn="asri-enhance-moreanimations";async function Fi(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-moreanimations"),r=await p(n,Vn)||{};a?(e.removeAttribute("data-asri-enhance-moreanimations"),r[Wn]=!1):(e.setAttribute("data-asri-enhance-moreanimations","true"),r[Wn]=!0),await y(n,Vn,r).catch(()=>{})}async function $i(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Vn);a&&a[Wn]===!0?e.setAttribute("data-asri-enhance-moreanimations","true"):e.removeAttribute("data-asri-enhance-moreanimations")}var Yn="config.json",Un="asri-enhance-singlecolumnslashmenu",Xe="data-asri-enhance-singlecolumnslashmenu";async function Oi(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute(Xe),r=await p(n,Yn)||{};a?(e.removeAttribute(Xe),r[Un]=!1):(e.setAttribute(Xe,"true"),r[Un]=!0),await y(n,Yn,r).catch(()=>{})}async function Di(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Yn);a&&a[Un]===!0?e.setAttribute(Xe,"true"):e.removeAttribute(Xe)}var Xn="config.json",Zn="asri-enhance-cardsearchlist",Ze="data-asri-enhance-cardsearchlist";async function qi(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute(Ze),r=await p(n,Xn)||{};a?(e.removeAttribute(Ze),r[Zn]=!1):(e.setAttribute(Ze,"true"),r[Zn]=!0),await y(n,Xn,r).catch(()=>{})}async function Bi(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Xn);a&&a[Zn]===!0?e.setAttribute(Ze,"true"):e.removeAttribute(Ze)}var Qn="config.json",zi="asri-enhance-windowtransparencyvalue",Jn="data-asri-enhance-windowtransparencyvalue";async function Gi(n,t){t&&(t.preventDefault(),t.stopPropagation())}async function ji(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Qn),r=a==null?void 0:a[zi];r!=null?e.setAttribute(Jn,String(r)):e.setAttribute(Jn,"0.5")}async function Ki(n,t){let e=await p(n,Qn)||{};e[zi]=t,await y(n,Qn,e);let a=document.documentElement;a&&a.setAttribute(Jn,String(t))}var ea="config.json",ta="asri-enhance-wholewindowtransparency",Qe="data-asri-enhance-wholewindowtransparency";async function Vi(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute(Qe),r=await p(n,ea)||{};a?(e.removeAttribute(Qe),r[ta]=!1):(e.setAttribute(Qe,"true"),r[ta]=!0),await y(n,ea,r).catch(()=>{})}async function Wi(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,ea);a&&a[ta]===!0?e.setAttribute(Qe,"true"):e.removeAttribute(Qe)}var na="config.json",aa="asri-enhance-smoothcaret",ra="asri-enhance-smooth-caret-item",Je=null,et=null,ve=[],zt=0,Gt=null,jt=null,ia=null,Yi=()=>{var o;(o=document.getElementById(ra))==null||o.remove();let n=document.createElement("div");n.id=ra,document.body.appendChild(n);let t=!1,e=s=>{if(s===Gt)return zt;let l=s;for(;l&&l!==document.body;){if(l.classList.contains("b3-dialog")||l.classList.contains("block__popover--open")||l.id==="commonMenu"){let u=window.getComputedStyle(l).zIndex,f=parseInt(u)||0;return zt=f,Gt=s,f}l=l.parentElement}return zt=0,Gt=s,0},a=()=>{var f,d,k;t=!1;let s=window.getSelection(),l=(f=s.focusNode)==null?void 0:f.parentElement;if((d=l==null?void 0:l.classList)!=null&&d.contains("av__cursor")){n.classList.add("asri-enhance-smooth-caret-item-none");return}if(((k=l==null?void 0:l.getAttribute)==null?void 0:k.call(l,"contenteditable"))==="false"){n.classList.add("asri-enhance-smooth-caret-item-none");return}let u=(l==null?void 0:l.closest('[contenteditable="true"]'))||(l!=null&&l.closest(".protyle-title")?l:null);if(s.rangeCount&&u){let g=s.getRangeAt(0),T=g.getClientRects()[0];if(!T||T.height===0){let E=null;try{let h=g.cloneRange();E=document.createTextNode("\u200B"),h.insertNode(E),h.selectNode(E),T=h.getBoundingClientRect()}catch(h){}finally{E!=null&&E.parentNode&&E.parentNode.removeChild(E)}}if(T){if(l!==ia&&(ia=l!=null?l:null,jt=l==null?void 0:l.closest(".protyle-content")),jt){let C=jt.getBoundingClientRect();if(!(T.left>=C.left&&T.top>=C.top&&T.right<=C.right&&T.bottom<=C.bottom)){n.classList.add("asri-enhance-smooth-caret-item-none");return}}n.classList.remove("asri-enhance-smooth-caret-item-none"),n.style.transform=`translate3d(${T.left-.75}px, ${T.top-T.height*.025}px, 0)`,n.style.height=`${T.height*1.05}px`;let E=e(u);n.style.zIndex=(E+1).toString();let h=null,b=s.focusNode;if(b)if(b.nodeType===Node.TEXT_NODE){let C=b.parentElement;C&&(h=window.getComputedStyle(C).color)}else b.nodeType===Node.ELEMENT_NODE&&(h=window.getComputedStyle(b).color);h||(h=window.getComputedStyle(u).color),h&&h!=="transparent"&&!/rgba?\([^)]*,\s*0\s*\)$/i.test(h)?n.style.setProperty("--asri-enhance-smooth-caret-color",h):n.style.removeProperty("--asri-enhance-smooth-caret-color");return}}n.classList.add("asri-enhance-smooth-caret-item-none")},r=()=>{t||(window.requestAnimationFrame(a),t=!0)},i=()=>{ve.forEach(l=>clearTimeout(l)),ve=[],[200,400,600].forEach(l=>{let c=window.setTimeout(()=>{r();let u=ve.indexOf(c);u>-1&&ve.splice(u,1)},l);ve.push(c)})};et=i,Je=r,document.addEventListener("selectionchange",r),document.addEventListener("scroll",r,{capture:!0,passive:!0}),document.addEventListener("keyup",i),document.addEventListener("mouseup",i),a()},Kt=()=>{var n;(n=document.getElementById(ra))==null||n.remove(),ve.forEach(t=>clearTimeout(t)),ve=[],zt=0,Gt=null,jt=null,ia=null,Je&&(document.removeEventListener("selectionchange",Je),document.removeEventListener("scroll",Je,{capture:!0}),Je=null),et&&(document.removeEventListener("keyup",et),document.removeEventListener("mouseup",et),et=null)};async function Ui(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-smoothcaret"),r=await p(n,na)||{};a?(e.removeAttribute("data-asri-enhance-smoothcaret"),r[aa]=!1,Kt()):(e.setAttribute("data-asri-enhance-smoothcaret","true"),r[aa]=!0,Yi()),await y(n,na,r).catch(()=>{})}async function Xi(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,na);a&&a[aa]===!0?(e.setAttribute("data-asri-enhance-smoothcaret","true"),Yi()):(e.removeAttribute("data-asri-enhance-smoothcaret"),Kt())}var sa="config.json",la="asri-enhance-fluidcursor",ca="asri-enhance-fluid-cursor-canvas",Se=null,rt=null,it=null,ot=null,st=null,lt=null,Wt=null,G=[],re={x:-100,y:-100},Yt=0,j=null,U=null,tt=!0,cl="#f44336",ul=0,He=null,ml=200,Vt=!1,dl=300,nt=!1,at=0,ct=0,hl=.08,Pe={trailLength:8,widthBase:6,widthFactor:1.2,headEase:.9,tailStiffness:.4,zIndex:"999999",opacity:1},Zi=()=>getComputedStyle(document.documentElement).getPropertyValue("--b3-theme-primary").trim()||"#f44336",oa=()=>{let n=Math.random(),t=Zi();if(n<.02){let e=Math.random(),a;e<.8?a=Math.floor(Math.random()*31)-15:e<.9?a=(Math.random()<.5?-1:1)*(Math.floor(Math.random()*31)+30):a=(Math.random()<.5?-1:1)*(Math.floor(Math.random()*91)+90),cl=`oklch(from ${t} l c calc(h + ${nt?180:0} + ${a}))`,at=a,ct=a}else{let e=Math.random(),a;e<.6?a=Math.floor(Math.random()*31)-15:e<.8?a=(Math.random()<.5?-1:1)*(Math.floor(Math.random()*31)+30):a=(Math.random()<.5?-1:1)*(Math.floor(Math.random()*91)+90),ct=a}},Qi=()=>{let n=document.getElementById(ca);n&&n.remove(),j=document.createElement("canvas"),j.id=ca,Object.assign(j.style,{position:"fixed",top:"0",left:"0",pointerEvents:"none",zIndex:Pe.zIndex,opacity:"0"}),document.body.appendChild(j),U=j.getContext("2d"),nt=!1,oa(),re={x:-100,y:-100},G=[],tt=!0,Vt=!1;let t=()=>{if(!j)return;let a=window.devicePixelRatio||1;j.width=window.innerWidth*a,j.height=window.innerHeight*a,j.style.width=window.innerWidth+"px",j.style.height=window.innerHeight+"px",U&&U.scale(a,a)};rt=t,t(),it=a=>{if(tt){tt=!1,re.x=a.clientX,re.y=a.clientY;for(let r=0;r<Pe.trailLength;r++)G.push({x:re.x,y:re.y})}else re.x=a.clientX,re.y=a.clientY;oa(),ul=Date.now(),!Vt&&j&&(Vt=!0,j.style.transition="none",j.style.opacity="1"),He!==null&&clearTimeout(He),He=window.setTimeout(()=>{Vt=!1,j&&(j.style.transition=`opacity ${dl}ms ease-out`,j.style.opacity="0")},ml)},window.addEventListener("resize",rt),window.addEventListener("mousemove",it,{passive:!0}),ot=()=>{nt=!0},st=()=>{nt=!1,ct=0},window.addEventListener("mousedown",ot,{passive:!0}),window.addEventListener("mouseup",st,{passive:!0}),lt=()=>{G=[],tt=!0},document.addEventListener("mouseleave",lt);let e=a=>{if(!j||!U)return;let r=(a-Yt)/1e3;Yt=a;let i=r*60,o=ct-at;Math.abs(o)>.5?at+=o*hl*i:at=ct;let c=`oklch(from ${Zi()} l c calc(h + ${nt?180:0} + ${at}))`;if(U.clearRect(0,0,window.innerWidth,window.innerHeight),tt){Se=window.requestAnimationFrame(e);return}let u=1-Math.pow(1-Pe.headEase,i),f=1-Math.pow(1-Pe.tailStiffness,i);G[0].x+=(re.x-G[0].x)*u,G[0].y+=(re.y-G[0].y)*u;for(let d=1;d<G.length;d++)G[d].x+=(G[d-1].x-G[d].x)*f,G[d].y+=(G[d-1].y-G[d].y)*f;U.strokeStyle=c,U.lineCap="round",U.lineJoin="round";for(let d=0;d<G.length-1;d++){let k=Math.max(0,Pe.widthBase-d*Pe.widthFactor);U.beginPath(),U.lineWidth=k,U.moveTo(G[d].x,G[d].y),U.lineTo(G[d+1].x,G[d+1].y),U.stroke()}Se=window.requestAnimationFrame(e)};Yt=performance.now(),Se=window.requestAnimationFrame(e),Wt=window.setInterval(oa,3e3)},Ut=()=>{let n=document.getElementById(ca);n&&n.remove(),Se!==null&&(window.cancelAnimationFrame(Se),Se=null),Wt!==null&&(window.clearInterval(Wt),Wt=null),He!==null&&(clearTimeout(He),He=null),rt&&(window.removeEventListener("resize",rt),rt=null),it&&(window.removeEventListener("mousemove",it),it=null),ot&&(window.removeEventListener("mousedown",ot),ot=null),st&&(window.removeEventListener("mouseup",st),st=null),lt&&(document.removeEventListener("mouseleave",lt),lt=null),G=[],re={x:0,y:0},Yt=0,j=null,U=null};async function Ji(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-fluidcursor"),r=await p(n,sa)||{};a?(e.removeAttribute("data-asri-enhance-fluidcursor"),r[la]=!1,Ut()):(e.setAttribute("data-asri-enhance-fluidcursor","true"),r[la]=!0,Qi()),await y(n,sa,r).catch(()=>{})}async function eo(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,sa);a&&a[la]===!0?(e.setAttribute("data-asri-enhance-fluidcursor","true"),Qi()):(e.removeAttribute("data-asri-enhance-fluidcursor"),Ut())}var ua="config.json",ma="asri-enhance-island-layout",Xt=class{constructor(){this.hasFullscreen=!1;this.timer=null;this.isActive=!0;this.onFullscreenChange=null}start(t){this.onFullscreenChange=t||null,this.check(),document.addEventListener("visibilitychange",()=>{this.isActive=document.visibilityState==="visible",this.isActive&&this.check()});let e=()=>{this.isActive&&this.check(),this.timer=setTimeout(e,this.isActive?200:1e3)};this.timer=setTimeout(e,200)}check(){var e;let t=document.querySelector(".protyle.fullscreen:not(.fn__none)")!==null;t!==this.hasFullscreen&&(this.hasFullscreen=t,document.body.classList.toggle("asri-enhance-has-fullscreen",t),(e=this.onFullscreenChange)==null||e.call(this,t))}stop(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.hasFullscreen&&(this.hasFullscreen=!1,document.body.classList.remove("asri-enhance-has-fullscreen"))}},de=null;async function to(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-island-layout"),r=await p(n,ua)||{};a?(e.removeAttribute("data-asri-enhance-island-layout"),r[ma]=!1,ut(),de==null||de.stop(),de=null):(e.setAttribute("data-asri-enhance-island-layout","true"),r[ma]=!0,Zt(),de=new Xt,de.start(i=>{var o;(o=document.body)!=null&&o.classList.contains("body--window")||(i?ut():Zt())})),await y(n,ua,r).catch(()=>{})}function Zt(){var t,e;let n=window;if(typeof window!="undefined"&&n.process&&n.require)try{let{BrowserWindow:a}=n.require("@electron/remote");if(n.process.platform==="darwin"){if((t=document.body)!=null&&t.classList.contains("body--window"))return;(e=a.getFocusedWindow())==null||e.setWindowButtonPosition({x:16,y:24})}}catch(a){}}function ut(){var t;let n=window;if(typeof window!="undefined"&&n.process&&n.require)try{let{BrowserWindow:e}=n.require("@electron/remote");n.process.platform==="darwin"&&((t=e.getFocusedWindow())==null||t.setWindowButtonPosition({x:16,y:16}))}catch(e){}}async function no(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,ua);a&&a[ma]===!0?(e.setAttribute("data-asri-enhance-island-layout","true"),Zt(),de=new Xt,de.start(r=>{var i;(i=document.body)!=null&&i.classList.contains("body--window")||(r?ut():Zt())})):e.removeAttribute("data-asri-enhance-island-layout")}var da="config.json",ha="asri-enhance-paper",mt="data-asri-enhance-paper",ao=["asri-enhance-noise","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fiber","asri-enhance-fabric"],pl=["data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fiber","data-asri-enhance-fabric"];function ro(n,t){t.preventDefault(),t.stopPropagation(),p(n,da).then(e=>{let r=!((e==null?void 0:e[ha])||!1),i={...e,[ha]:r};r&&ao.forEach(o=>{i[o]=!1}),y(n,da,i).then(()=>{pl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(mt,"true"):document.documentElement.removeAttribute(mt)}).catch(()=>{})}).catch(()=>{})}async function io(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,da),r=a==null?void 0:a[ha],i=ao.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(mt):e.setAttribute(mt,"true"):e.removeAttribute(mt)}var pa="config.json",fa="asri-enhance-noise",dt="data-asri-enhance-noise",oo=["asri-enhance-paper","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fiber","asri-enhance-fabric"],fl=["data-asri-enhance-paper","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fiber","data-asri-enhance-fabric"];function so(n,t){t.preventDefault(),t.stopPropagation(),p(n,pa).then(e=>{let r=!((e==null?void 0:e[fa])||!1),i={...e,[fa]:r};r&&oo.forEach(o=>{i[o]=!1}),y(n,pa,i).then(()=>{fl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(dt,"true"):document.documentElement.removeAttribute(dt)}).catch(()=>{})}).catch(()=>{})}async function lo(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,pa),r=a==null?void 0:a[fa],i=oo.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(dt):e.setAttribute(dt,"true"):e.removeAttribute(dt)}var ga="config.json",ba="asri-enhance-acrylic",ht="data-asri-enhance-acrylic",co=["asri-enhance-paper","asri-enhance-noise","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fiber","asri-enhance-fabric"],gl=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fiber","data-asri-enhance-fabric"];function uo(n,t){t.preventDefault(),t.stopPropagation(),p(n,ga).then(e=>{let r=!((e==null?void 0:e[ba])||!1),i={...e,[ba]:r};r&&co.forEach(o=>{i[o]=!1}),y(n,ga,i).then(()=>{gl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(ht,"true"):document.documentElement.removeAttribute(ht)}).catch(()=>{})}).catch(()=>{})}async function mo(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,ga),r=a==null?void 0:a[ba],i=co.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(ht):e.setAttribute(ht,"true"):e.removeAttribute(ht)}var ya="config.json",va="asri-enhance-checkerboard",pt="data-asri-enhance-checkerboard",ho=["asri-enhance-paper","asri-enhance-noise","asri-enhance-acrylic","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fiber","asri-enhance-fabric"],bl=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fiber","data-asri-enhance-fabric"];function po(n,t){t.preventDefault(),t.stopPropagation(),p(n,ya).then(e=>{let r=!((e==null?void 0:e[va])||!1),i={...e,[va]:r};r&&ho.forEach(o=>{i[o]=!1}),y(n,ya,i).then(()=>{bl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(pt,"true"):document.documentElement.removeAttribute(pt)}).catch(()=>{})}).catch(()=>{})}async function fo(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,ya),r=a==null?void 0:a[va],i=ho.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(pt):e.setAttribute(pt,"true"):e.removeAttribute(pt)}var Ea="config.json",ka="asri-enhance-grid",ft="data-asri-enhance-grid",go=["asri-enhance-paper","asri-enhance-noise","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fiber","asri-enhance-fabric"],yl=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fiber","data-asri-enhance-fabric"];function bo(n,t){t.preventDefault(),t.stopPropagation(),p(n,Ea).then(e=>{let r=!((e==null?void 0:e[ka])||!1),i={...e,[ka]:r};r&&go.forEach(o=>{i[o]=!1}),y(n,Ea,i).then(()=>{yl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(ft,"true"):document.documentElement.removeAttribute(ft)}).catch(()=>{})}).catch(()=>{})}async function yo(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Ea),r=a==null?void 0:a[ka],i=go.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(ft):e.setAttribute(ft,"true"):e.removeAttribute(ft)}var wa="config.json",xa="asri-enhance-polkadot",gt="data-asri-enhance-polkadot",vo=["asri-enhance-paper","asri-enhance-noise","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fiber","asri-enhance-fabric"],vl=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fiber","data-asri-enhance-fabric"];function Eo(n,t){t.preventDefault(),t.stopPropagation(),p(n,wa).then(e=>{let r=!((e==null?void 0:e[xa])||!1),i={...e,[xa]:r};r&&vo.forEach(o=>{i[o]=!1}),y(n,wa,i).then(()=>{vl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(gt,"true"):document.documentElement.removeAttribute(gt)}).catch(()=>{})}).catch(()=>{})}async function ko(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,wa),r=a==null?void 0:a[xa],i=vo.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(gt):e.setAttribute(gt,"true"):e.removeAttribute(gt)}var Ca="config.json",Ta="asri-enhance-crossdot",bt="data-asri-enhance-crossdot",wo=["asri-enhance-paper","asri-enhance-noise","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fiber","asri-enhance-fabric"],El=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fiber","data-asri-enhance-fabric"];function xo(n,t){t.preventDefault(),t.stopPropagation(),p(n,Ca).then(e=>{let r=!((e==null?void 0:e[Ta])||!1),i={...e,[Ta]:r};r&&wo.forEach(o=>{i[o]=!1}),y(n,Ca,i).then(()=>{El.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(bt,"true"):document.documentElement.removeAttribute(bt)}).catch(()=>{})}).catch(()=>{})}async function Co(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Ca),r=a==null?void 0:a[Ta],i=wo.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(bt):e.setAttribute(bt,"true"):e.removeAttribute(bt)}var _a="config.json",Aa="asri-enhance-honeycomb",yt="data-asri-enhance-honeycomb",To=["asri-enhance-paper","asri-enhance-noise","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fiber","asri-enhance-fabric"],kl=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fiber","data-asri-enhance-fabric"];function _o(n,t){t.preventDefault(),t.stopPropagation(),p(n,_a).then(e=>{let r=!((e==null?void 0:e[Aa])||!1),i={...e,[Aa]:r};r&&To.forEach(o=>{i[o]=!1}),y(n,_a,i).then(()=>{kl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(yt,"true"):document.documentElement.removeAttribute(yt)}).catch(()=>{})}).catch(()=>{})}async function Ao(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,_a),r=a==null?void 0:a[Aa],i=To.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(yt):e.setAttribute(yt,"true"):e.removeAttribute(yt)}var La="config.json",Ma="asri-enhance-wood",vt="data-asri-enhance-wood",Lo=["asri-enhance-paper","asri-enhance-noise","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-camouflage","asri-enhance-fiber","asri-enhance-fabric"],wl=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-camouflage","data-asri-enhance-fiber","data-asri-enhance-fabric"];function Mo(n,t){t.preventDefault(),t.stopPropagation(),p(n,La).then(e=>{let r=!((e==null?void 0:e[Ma])||!1),i={...e,[Ma]:r};r&&Lo.forEach(o=>{i[o]=!1}),y(n,La,i).then(()=>{wl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(vt,"true"):document.documentElement.removeAttribute(vt)}).catch(()=>{})}).catch(()=>{})}async function Po(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,La),r=a==null?void 0:a[Ma],i=Lo.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(vt):e.setAttribute(vt,"true"):e.removeAttribute(vt)}var Pa="config.json",Sa="asri-enhance-camouflage",Et="data-asri-enhance-camouflage",So=["asri-enhance-paper","asri-enhance-noise","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-fiber","asri-enhance-fabric"],xl=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-fiber","data-asri-enhance-fabric"];function Ho(n,t){t.preventDefault(),t.stopPropagation(),p(n,Pa).then(e=>{let r=!((e==null?void 0:e[Sa])||!1),i={...e,[Sa]:r};r&&So.forEach(o=>{i[o]=!1}),y(n,Pa,i).then(()=>{xl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(Et,"true"):document.documentElement.removeAttribute(Et)}).catch(()=>{})}).catch(()=>{})}async function Ro(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Pa),r=a==null?void 0:a[Sa],i=So.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(Et):e.setAttribute(Et,"true"):e.removeAttribute(Et)}var Ha="config.json",Ra="asri-enhance-fiber",kt="data-asri-enhance-fiber",Io=["asri-enhance-paper","asri-enhance-noise","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fabric"],Cl=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fabric"];function No(n,t){t.preventDefault(),t.stopPropagation(),p(n,Ha).then(e=>{let r=!((e==null?void 0:e[Ra])||!1),i={...e,[Ra]:r};r&&Io.forEach(o=>{i[o]=!1}),y(n,Ha,i).then(()=>{Cl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(kt,"true"):document.documentElement.removeAttribute(kt)}).catch(()=>{})}).catch(()=>{})}async function Fo(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Ha),r=a==null?void 0:a[Ra],i=Io.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(kt):e.setAttribute(kt,"true"):e.removeAttribute(kt)}var Ia="config.json",Na="asri-enhance-fabric",wt="data-asri-enhance-fabric",$o=["asri-enhance-paper","asri-enhance-noise","asri-enhance-acrylic","asri-enhance-checkerboard","asri-enhance-grid","asri-enhance-polkadot","asri-enhance-crossdot","asri-enhance-honeycomb","asri-enhance-wood","asri-enhance-camouflage","asri-enhance-fiber"],Tl=["data-asri-enhance-paper","data-asri-enhance-noise","data-asri-enhance-acrylic","data-asri-enhance-checkerboard","data-asri-enhance-grid","data-asri-enhance-polkadot","data-asri-enhance-crossdot","data-asri-enhance-honeycomb","data-asri-enhance-wood","data-asri-enhance-camouflage","data-asri-enhance-fiber"];function Oo(n,t){t.preventDefault(),t.stopPropagation(),p(n,Ia).then(e=>{let r=!((e==null?void 0:e[Na])||!1),i={...e,[Na]:r};r&&$o.forEach(o=>{i[o]=!1}),y(n,Ia,i).then(()=>{Tl.forEach(o=>{document.documentElement.removeAttribute(o)}),r?document.documentElement.setAttribute(wt,"true"):document.documentElement.removeAttribute(wt)}).catch(()=>{})}).catch(()=>{})}async function Do(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Ia),r=a==null?void 0:a[Na],i=$o.some(o=>(a==null?void 0:a[o])===!0||(a==null?void 0:a[o])==="true");r===!0||r==="true"?i?e.removeAttribute(wt):e.setAttribute(wt,"true"):e.removeAttribute(wt)}var Fa="config.json",$a="asri-enhance-typewriter",he=null,Oa=!1,Ee=null,ke=null,Re=null,qo=null,Bo=null,_l=600,zo=100,Al=()=>{let n=window.getSelection();if(!n||n.rangeCount===0)return;let t=n.getRangeAt(0),e=t.getClientRects()[0];if(!e||e.height===0){let d=null;try{let k=t.cloneRange();d=document.createTextNode("\u200B"),k.insertNode(d),k.selectNode(d),e=k.getBoundingClientRect()}catch(k){}finally{d!=null&&d.parentNode&&d.parentNode.removeChild(d)}}if(!e)return;let a=null,r=t.startContainer instanceof HTMLElement?t.startContainer:t.startContainer.parentElement;for(;r&&r!==document.body;){if(r.classList.contains("protyle-content")){a=r;break}let d=getComputedStyle(r).overflowY;(d==="auto"||d==="scroll")&&(a=r),r=r.parentElement}if(!a){let d=document.querySelectorAll(".protyle-content");for(let k of d){let g=k.getBoundingClientRect();if(e.top>=g.top&&e.top<=g.bottom){a=k;break}}}a||(a=document.documentElement);let i=a.getBoundingClientRect(),o=i.height/2,s=a.scrollTop+e.top-i.top-o+e.height/2;Oa=!0;let l=a.scrollTop,c=s-l,u=performance.now(),f=d=>{let k=d-u,g=Math.min(k/_l,1),T=g<.5?4*g*g*g:1-Math.pow(-2*g+2,3)/2;if(a.scrollTop=l+c*T,g<1)ke=requestAnimationFrame(f);else{let E=window.getSelection();if(E&&E.rangeCount>0){let b=E.getRangeAt(0).getClientRects()[0];b&&Ll(b,i,a)}Ee!==null&&clearTimeout(Ee),Ee=window.setTimeout(()=>{Oa=!1,Ee=null},zo)}};ke!==null&&cancelAnimationFrame(ke),ke=requestAnimationFrame(f)},Ll=(n,t,e)=>{let a=n.top+n.height/2,r=t.top,i=t.height,l=`${(a-r)/i*100}%`,c=`${n.height*.75}px`,u=null,f=window.getSelection(),d=f==null?void 0:f.focusNode;if(d)if(d.nodeType===Node.TEXT_NODE){let k=d.parentElement;k&&(u=getComputedStyle(k).color)}else d.nodeType===Node.ELEMENT_NODE&&(u=getComputedStyle(d).color);u||(u=getComputedStyle(e).color),(qo!==l||Bo!==c)&&(qo=l,Bo=c,e.style.setProperty("--asri-enhance-focus-mask-position",l),e.style.setProperty("--asri-enhance-focus-mask-height",c)),u&&e.style.setProperty("--asri-enhance-focus-text-color",u)},Go=()=>{he&&(document.removeEventListener("selectionchange",he),he=null),he=()=>{Re===null&&(Re=window.setTimeout(()=>{Re=null},zo),requestAnimationFrame(()=>{Al()}))},document.addEventListener("selectionchange",he)},Qt=()=>{ke!==null&&(cancelAnimationFrame(ke),ke=null),Ee!==null&&(clearTimeout(Ee),Ee=null),Re!==null&&(clearTimeout(Re),Re=null),he&&(document.removeEventListener("selectionchange",he),he=null),Oa=!1};async function Jt(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-typewriter"),r=await p(n,Fa)||{};a?(e.removeAttribute("data-asri-enhance-typewriter"),r[$a]=!1,Qt()):(e.setAttribute("data-asri-enhance-typewriter","true"),r[$a]=!0,Go()),await y(n,Fa,r).catch(()=>{})}async function jo(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Fa);a&&a[$a]===!0?(e.setAttribute("data-asri-enhance-typewriter","true"),Go()):(e.removeAttribute("data-asri-enhance-typewriter"),Qt())}var Da="config.json",qa="asri-enhance-focus";async function en(n,t){t&&(t.preventDefault(),t.stopPropagation());let e=document.documentElement;if(!e)return;let a=e.hasAttribute("data-asri-enhance-focus"),r=await p(n,Da)||{};a?(e.removeAttribute("data-asri-enhance-focus"),r[qa]=!1):(e.setAttribute("data-asri-enhance-focus","true"),r[qa]=!0),await y(n,Da,r).catch(()=>{})}async function Ko(n,t){let e=document.documentElement;if(!e)return;let a=t!==void 0?t:await p(n,Da);a&&a[qa]===!0?e.setAttribute("data-asri-enhance-focus","true"):e.removeAttribute("data-asri-enhance-focus")}var Q='<svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M19 3h-4a2 2 0 0 0-2 2v12a4 4 0 0 0 8 0V5a2 2 0 0 0-2-2"></path><path d="m13 7.35l-2-2a2 2 0 0 0-2.828 0L5.344 8.178a2 2 0 0 0 0 2.828l9 9"></path><path d="M7.3 13H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h12m0-4v.01"></path></g></svg>',O='<svg class="b3-menu__icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"><path d="M512 443.733333a68.266667 68.266667 0 1 1-0.034133 136.567467A68.266667 68.266667 0 0 1 512 443.733333z m0-238.933333a68.266667 68.266667 0 1 1-0.034133 136.567467A68.266667 68.266667 0 0 1 512 204.8z m0 477.866667a68.266667 68.266667 0 1 1-0.034133 136.567466A68.266667 68.266667 0 0 1 512 682.666667z" fill="currentColor"></path></svg>',Vo=10,Wo=100;function Yo(n){n.activePolls.forEach(t=>window.clearTimeout(t)),n.activePolls.clear()}function Ml(n,t,e){let a=window.setTimeout(()=>{n.activePolls.delete(a),t()},e);return n.activePolls.add(a),a}function Pl(n){n.pollTimerId!==void 0&&(window.clearTimeout(n.pollTimerId),n.pollTimerId=void 0),Yo(n),n.boundTarget&&(n.boundTarget=null),n.timeoutId!==void 0&&(window.clearTimeout(n.timeoutId),n.timeoutId=void 0)}function Uo(n,t){let e={timeoutId:void 0,pollTimerId:void 0,boundTarget:null,attempts:0,activePolls:new Set},a=i=>{e.timeoutId!==void 0&&window.clearTimeout(e.timeoutId),e.timeoutId=window.setTimeout(()=>{Yo(e),t(i),e.timeoutId=void 0},0)},r=()=>{let i=document.querySelector("#barMode");if(i){e.boundTarget=i,i.addEventListener("click",a,!0),e.pollTimerId=void 0;return}e.attempts+=1,e.attempts<Vo?e.pollTimerId=window.setTimeout(r,Wo):e.pollTimerId=void 0};return r(),()=>{Pl(e),e.boundTarget&&(e.boundTarget.removeEventListener("click",a,!0),e.boundTarget=null)}}function Xo(n,t){let e=document.querySelector('#commonMenu[data-name="barmode"]');if(!e)return;let a={activePolls:new Set,attempts:0},r=(i=0)=>{let o=e.querySelector("#pickColor"),s=e.querySelector("#topbarFusionPlus");if(!o||!s){i+1<Vo&&Ml(a,()=>r(i+1),Wo);return}Sl(n,o),Hl(n,s)};r()}function Sl(n,t){var i,o,s,l,c,u,f,d,k,g,T,E,h,b;let e=t.parentElement;if(!e)return;if(!e.querySelector("#asri-enhance-palette")){let C=document.createElement("button");C.className="b3-menu__item asri-enhance",C.id="asri-enhance-palette",C.innerHTML=`${O}<span class="b3-menu__label">${((i=n.i18n)==null?void 0:i.morePresetColors)||"morePresetColors"}</span><svg class="b3-menu__icon b3-menu__icon--small"><use xlink:href="#iconRight"></use></svg><div class="b3-menu__submenu"><div class="b3-menu__items"><button class="b3-menu__item" id="asri-enhance-sakura">${Q}<span class="b3-menu__label">${((o=n.i18n)==null?void 0:o.sakura)||"Sakura"}</span></button><button class="b3-menu__item" id="asri-enhance-amber">${Q}<span class="b3-menu__label">${((s=n.i18n)==null?void 0:s.amber)||"amber"}</span></button><button class="b3-menu__item" id="asri-enhance-wilderness">${Q}<span class="b3-menu__label">${((l=n.i18n)==null?void 0:l.wilderness)||"wilderness"}</span></button><button class="b3-menu__item" id="asri-enhance-midnight">${Q}<span class="b3-menu__label">${((c=n.i18n)==null?void 0:c.midnight)||"midnight"}</span></button><button class="b3-menu__item" id="asri-enhance-salt">${Q}<span class="b3-menu__label">${((u=n.i18n)==null?void 0:u.salt)||"salt"}</span></button><button class="b3-menu__item" id="asri-enhance-rosepine">${Q}<span class="b3-menu__label">${((f=n.i18n)==null?void 0:f.rosePine)||"Ros\xE9 Pine"}</span></button><button class="b3-menu__item" id="asri-enhance-topaz">${Q}<span class="b3-menu__label">${((d=n.i18n)==null?void 0:d.goldenTopaz)||"Golden Topaz"}</span></button><button class="b3-menu__item" id="asri-enhance-oxygen">${Q}<span class="b3-menu__label">${((k=n.i18n)==null?void 0:k.oxygen)||"Oxygen"}</span></button><button class="b3-menu__item" id="asri-enhance-shade">${Q}<span class="b3-menu__label">${((g=n.i18n)==null?void 0:g.shade)||"Shade"}</span></button><button class="b3-menu__item" id="asri-enhance-gruvbox">${Q}<span class="b3-menu__label">${((T=n.i18n)==null?void 0:T.gruvbox)||"Gruvbox"}</span></button><button class="b3-menu__item" id="asri-enhance-glitch">${Q}<span class="b3-menu__label">${((E=n.i18n)==null?void 0:E.glitch)||"glitch"}</span></button><button class="b3-menu__item" id="asri-enhance-nostalgia">${Q}<span class="b3-menu__label">${((h=n.i18n)==null?void 0:h.nostalgia)||"\u56DE\u5FC6"}</span></button></div></div>`;let A=t,_=t.previousElementSibling;for(;_;){if(_.classList&&_.classList.contains("b3-menu__separator")){A=_;break}_=_.previousElementSibling}e.insertBefore(C,A)}[{id:"asri-enhance-sakura",handler:or},{id:"asri-enhance-amber",handler:ar},{id:"asri-enhance-wilderness",handler:cr},{id:"asri-enhance-midnight",handler:dr},{id:"asri-enhance-salt",handler:fr},{id:"asri-enhance-rosepine",handler:yr},{id:"asri-enhance-topaz",handler:kr},{id:"asri-enhance-oxygen",handler:Cr},{id:"asri-enhance-shade",handler:Ar},{id:"asri-enhance-gruvbox",handler:Pr},{id:"asri-enhance-glitch",handler:Rr},{id:"asri-enhance-nostalgia",handler:Fr}].forEach(({id:C,handler:A})=>{let _=e.querySelector(`#${C}`);_&&(_.onclick=P=>A(n,P))});let r=document.querySelector('#commonMenu[data-name="barmode"] #followCoverImgColor');if(r&&!e.querySelector("#asri-enhance-follow-time")){let C=document.documentElement.style.getPropertyValue("--asri-enhance-follow-time-base-color")||"#3478f6",A=document.createElement("button");A.className="b3-menu__item asri-enhance",A.id="asri-enhance-follow-time",A.innerHTML=`<svg class="b3-menu__icon"></svg><input id="asri-enhance-followtime-colorpicker" type="color" value="${C}"><span class="b3-menu__label">${((b=n.i18n)==null?void 0:b.followTime)||"Follow Time"}</span>`,r.nextSibling?e.insertBefore(A,r.nextSibling):e.appendChild(A);let _=A.querySelector("#asri-enhance-followtime-colorpicker");_&&(A.addEventListener("click",async P=>{P.preventDefault(),P.stopPropagation(),await Ja(n),_.click()}),_.addEventListener("click",P=>{P.stopPropagation()}),_.addEventListener("input",async P=>{let $=P.target;await tr(n,$.value)}))}}function Hl(n,t){var r,i,o,s,l,c,u,f,d,k;let e=t.parentElement;if(!e)return;if(!e.querySelector("#asri-enhance-more")){let g=document.createElement("button");g.className="b3-menu__item asri-enhance",g.id="asri-enhance-more",g.innerHTML=`${O}<span class="b3-menu__label">${((r=n.i18n)==null?void 0:r.more)||"more"}</span><svg class="b3-menu__icon b3-menu__icon--small"><use xlink:href="#iconRight"></use></svg><div class="b3-menu__submenu"><div class="b3-menu__items"><button class="b3-menu__item" id="asri-enhance-detail-adjustment">${O}<span class="b3-menu__label">${((i=n.i18n)==null?void 0:i.detailAdjustment)||"detailAdjustment"}</span><svg class="b3-menu__icon b3-menu__icon--small"><use xlink:href="#iconRight"></use></svg><div class="b3-menu__submenu"><div class="b3-menu__items"></div></div></button><button class="b3-menu__item" id="asri-enhance-texture">${O}<span class="b3-menu__label">${((o=n.i18n)==null?void 0:o.texture)||"texture"}</span><svg class="b3-menu__icon b3-menu__icon--small"><use xlink:href="#iconRight"></use></svg><div class="b3-menu__submenu"><div class="b3-menu__items"></div></div></button><button class="b3-menu__item" id="asri-enhance-immersive">${O}<span class="b3-menu__label">${((s=n.i18n)==null?void 0:s.immersive)||"immersiveEdit"}</span><svg class="b3-menu__icon b3-menu__icon--small"><use xlink:href="#iconRight"></use></svg><div class="b3-menu__submenu"><div class="b3-menu__items"></div></div></button><button class="b3-menu__separator"></button><button class="b3-menu__item" id="asri-enhance-list-bullet-line">${O}<span class="b3-menu__label">${((l=n.i18n)==null?void 0:l.listBulletLine)||"listBulletLine"}</span></button><button class="b3-menu__item" id="asri-enhance-vertical-tab">${O}<span class="b3-menu__label">${((c=n.i18n)==null?void 0:c.verticalTab)||"verticalTab"}</span></button><button class="b3-menu__item" id="asri-enhance-sidememo">${O}<span class="b3-menu__label">${((u=n.i18n)==null?void 0:u.sidememo)||"sidememo"}</span></button><button class="b3-menu__item" id="asri-enhance-smooth-caret">${O}<span class="b3-menu__label">${((f=n.i18n)==null?void 0:f.smoothCaret)||"smoothCaret"}</span></button><button class="b3-menu__item" id="asri-enhance-fluid-cursor">${O}<span class="b3-menu__label">${((d=n.i18n)==null?void 0:d.fluidCursor)||"fluidCursor"}</span></button><button class="b3-menu__item" id="asri-enhance-island-layout">${O}<span class="b3-menu__label">${((k=n.i18n)==null?void 0:k.islandLayout)||"islandLayout"}</span></button></div></div>`,t.nextSibling?e.insertBefore(g,t.nextSibling):e.appendChild(g)}[{id:"asri-enhance-list-bullet-line",handler:Yr},{id:"asri-enhance-vertical-tab",handler:ri},{id:"asri-enhance-sidememo",handler:_i},{id:"asri-enhance-smooth-caret",handler:Ui},{id:"asri-enhance-fluid-cursor",handler:Ji},{id:"asri-enhance-island-layout",handler:to}].forEach(({id:g,handler:T})=>{let E=e.querySelector(`#${g}`);E&&(E.onclick=h=>T(n,h))}),Rl(n,e),Il(n,e),Nl(n,e)}function Rl(n,t){var h,b,C,A,_,P,$,x,R,F,L,z,I,M;let e=t.querySelector("#asri-enhance-detail-adjustment");if(!e)return;let a=e.querySelector(".b3-menu__submenu .b3-menu__items");if(!a)return;if(!a.querySelector(".menu-item__subtitle")){let m=document.createElement("div");m.className="menu-item__subtitle asri-enhance-windowtransparencyvalue-subtitle",m.style.userSelect="none",m.style.padding="0 14px",m.textContent=((h=n.i18n)==null?void 0:h.windowTransparencyValueSubtitle)||"windowTransparencyValueSubtitle",a.appendChild(m)}if(!a.querySelector("#asri-enhance-wholewindowtransparency")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-wholewindowtransparency",m.innerHTML=`${O}<span class="b3-menu__label">${((b=n.i18n)==null?void 0:b.wholeWindowTransparency)||"wholeWindowTransparency"}</span>`,a.appendChild(m)}let r=a.querySelector("#asri-enhance-wholewindowtransparency");if(r&&(r.onclick=m=>Vi(n,m)),!a.querySelector("#asri-enhance-windowtransparencyvalue")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-windowtransparencyvalue",m.innerHTML=`<div aria-label="${((C=n.i18n)==null?void 0:C.windowTransparencyValue)||"windowTransparencyValue"}: 0.5" class="b3-tooltips b3-tooltips__n"><input style="box-sizing: border-box" type="range" class="b3-slider fn__block" min="0" max="1" step="0.05" value="0.5"></div>`,a.appendChild(m)}let i=a.querySelector("#asri-enhance-windowtransparencyvalue");if(i){i.onclick=v=>Gi(n,v);let m=i.querySelector("input[type='range']");m&&(p(n,"config.json").then(v=>{var B,Y,V;let S=v==null?void 0:v["asri-enhance-windowtransparencyvalue"];if(S!==void 0){let K=parseFloat(S);m.value=String(K);let X=(Y=(B=m.parentElement)==null?void 0:B.getAttribute("aria-label"))==null?void 0:Y.split(":")[0];X&&((V=m.parentElement)==null||V.setAttribute("aria-label",`${X}: ${K}`))}}).catch(()=>{}),m.addEventListener("input",async v=>{var V,K,X;let S=v.target,B=parseFloat(S.value);await Ki(n,B);let Y=(K=(V=S.parentElement)==null?void 0:V.getAttribute("aria-label"))==null?void 0:K.split(":")[0];Y&&((X=S.parentElement)==null||X.setAttribute("aria-label",`${Y}: ${B}`))}))}if(!a.querySelector("#asri-enhance-detail-sep-1")){let m=document.createElement("button");m.className="b3-menu__separator",m.id="asri-enhance-detail-sep-1",a.appendChild(m)}if(!a.querySelector("#asri-enhance-sidebar-top-sticky")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-sidebar-top-sticky",m.innerHTML=`${O}<span class="b3-menu__label">${((A=n.i18n)==null?void 0:A.sidebarTopSticky)||"sidebarTopSticky"}</span>`,a.appendChild(m)}let o=a.querySelector("#asri-enhance-sidebar-top-sticky");if(o&&(o.onclick=m=>Pi(n,m)),!a.querySelector("#asri-enhance-singlecolumnslashmenu")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-singlecolumnslashmenu",m.innerHTML=`${O}<span class="b3-menu__label">${((_=n.i18n)==null?void 0:_.singleColumnSlashMenu)||"singleColumnSlashMenu"}</span>`,a.appendChild(m)}let s=a.querySelector("#asri-enhance-singlecolumnslashmenu");if(s&&(s.onclick=m=>Oi(n,m)),!a.querySelector("#asri-enhance-cardsearchlist")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-cardsearchlist",m.innerHTML=`${O}<span class="b3-menu__label">${((P=n.i18n)==null?void 0:P.cardSearchList)||"cardSearchList"}</span>`,a.appendChild(m)}let l=a.querySelector("#asri-enhance-cardsearchlist");if(l&&(l.onclick=m=>qi(n,m)),!a.querySelector("#asri-enhance-detail-sep-2")){let m=document.createElement("button");m.className="b3-menu__separator",m.id="asri-enhance-detail-sep-2",a.appendChild(m)}if(!a.querySelector("#asri-enhance-colored-heading")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-colored-heading",m.innerHTML=`${O}<span class="b3-menu__label">${(($=n.i18n)==null?void 0:$.coloredHeading)||"coloredHeading"}</span>`,a.appendChild(m)}let c=a.querySelector("#asri-enhance-colored-heading");if(c&&(c.onclick=m=>Or(n,m)),!a.querySelector("#asri-enhance-heading-level-hint")){let m=document.createElement("button");if(m.className="b3-menu__item",m.id="asri-enhance-heading-level-hint",m.innerHTML=`${O}<span class="b3-menu__label">${((x=n.i18n)==null?void 0:x.headingLevelHint)||"headingLevelHint"}</span>`,a.querySelector("#asri-enhance-colored-tree")){let v=a.querySelector("#asri-enhance-colored-tree");a.insertBefore(m,v)}else a.appendChild(m)}let u=a.querySelector("#asri-enhance-heading-level-hint");if(u&&(u.onclick=m=>qr(n,m)),!a.querySelector("#asri-enhance-colored-tree")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-colored-tree",m.innerHTML=`${O}<span class="b3-menu__label">${((R=n.i18n)==null?void 0:R.coloredTree)||"coloredTree"}</span>`,a.appendChild(m)}let f=a.querySelector("#asri-enhance-colored-tree");if(f&&(f.onclick=m=>zr(n,m)),!a.querySelector("#asri-enhance-colored-list")){let m=document.createElement("button");if(m.className="b3-menu__item",m.id="asri-enhance-colored-list",m.innerHTML=`${O}<span class="b3-menu__label">${((F=n.i18n)==null?void 0:F.coloredList)||"coloredList"}</span>`,a.querySelector("#asri-enhance-colored-tree")){let v=a.querySelector("#asri-enhance-colored-tree");v&&v.nextSibling?a.insertBefore(m,v.nextSibling):a.appendChild(m)}else a.appendChild(m)}let d=a.querySelector("#asri-enhance-colored-list");if(d&&(d.onclick=m=>jr(n,m)),!a.querySelector("#asri-enhance-moreanimations")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-moreanimations",m.innerHTML=`${O}<span class="b3-menu__label">${((L=n.i18n)==null?void 0:L.moreAnimations)||"moreAnimations"}</span>`,a.appendChild(m)}let k=a.querySelector("#asri-enhance-moreanimations");if(k&&(k.onclick=m=>Fi(n,m)),!a.querySelector("#asri-enhance-global-frosted-glass")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-global-frosted-glass",m.innerHTML=`${O}<span class="b3-menu__label">${((z=n.i18n)==null?void 0:z.globalFrostedGlass)||"globalFrostedGlass"}</span>`,a.appendChild(m)}let g=a.querySelector("#asri-enhance-global-frosted-glass");if(g&&(g.onclick=m=>Li(n,m)),!a.querySelector("#asri-enhance-detail-sep-3")){let m=document.createElement("button");m.className="b3-menu__separator",m.id="asri-enhance-detail-sep-3",a.appendChild(m)}if(!a.querySelector("#asri-enhance-hide-tab")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-hide-tab",m.innerHTML=`${O}<span class="b3-menu__label">${((I=n.i18n)==null?void 0:I.hideTab)||"hideTab"}</span>`,a.appendChild(m)}let T=a.querySelector("#asri-enhance-hide-tab");if(T&&(T.onclick=m=>Hi(n,m)),!a.querySelector("#asri-enhance-hide-breadcrumb")){let m=document.createElement("button");m.className="b3-menu__item",m.id="asri-enhance-hide-breadcrumb",m.innerHTML=`${O}<span class="b3-menu__label">${((M=n.i18n)==null?void 0:M.hideBreadcrumb)||"hideBreadcrumb"}</span>`,a.appendChild(m)}let E=a.querySelector("#asri-enhance-hide-breadcrumb");E&&(E.onclick=m=>Ii(n,m))}function Il(n,t){var i,o,s,l,c,u,f,d,k,g,T,E;let e=t.querySelector("#asri-enhance-texture");if(!e)return;let a=e.querySelector(".b3-menu__submenu .b3-menu__items");if(!a)return;[{id:"paper",label:((i=n.i18n)==null?void 0:i.paper)||"paper",handler:ro},{id:"noise",label:((o=n.i18n)==null?void 0:o.noise)||"noise",handler:so},{id:"acrylic",label:((s=n.i18n)==null?void 0:s.acrylic)||"acrylic",handler:uo},{id:"checkerboard",label:((l=n.i18n)==null?void 0:l.checkerboard)||"checkerboard",handler:po},{id:"grid",label:((c=n.i18n)==null?void 0:c.grid)||"grid",handler:bo},{id:"polkadot",label:((u=n.i18n)==null?void 0:u.polkadot)||"polkadot",handler:Eo},{id:"crossdot",label:((f=n.i18n)==null?void 0:f.crossdot)||"crossdot",handler:xo},{id:"honeycomb",label:((d=n.i18n)==null?void 0:d.honeycomb)||"honeycomb",handler:_o},{id:"wood",label:((k=n.i18n)==null?void 0:k.wood)||"wood",handler:Mo},{id:"camouflage",label:((g=n.i18n)==null?void 0:g.camouflage)||"camouflage",handler:Ho},{id:"fiber",label:((T=n.i18n)==null?void 0:T.fiber)||"fiber",handler:No},{id:"fabric",label:((E=n.i18n)==null?void 0:E.fabric)||"fabric",handler:Oo}].forEach(({id:h,label:b,handler:C})=>{if(!a.querySelector(`#asri-enhance-${h}`)){let _=document.createElement("button");_.className="b3-menu__item",_.id=`asri-enhance-${h}`,_.innerHTML=`${O}<span class="b3-menu__label">${b}</span>`,a.appendChild(_)}let A=a.querySelector(`#asri-enhance-${h}`);A&&(A.onclick=_=>C(n,_))})}function Nl(n,t){var o,s;let e=t.querySelector("#asri-enhance-immersive");if(!e)return;let a=e.querySelector(".b3-menu__submenu .b3-menu__items");if(!a)return;if(!a.querySelector("#asri-enhance-typewriter")){let l=document.createElement("button");l.className="b3-menu__item",l.id="asri-enhance-typewriter",l.innerHTML=`${O}<span class="b3-menu__label">${((o=n.i18n)==null?void 0:o.typewriter)||"typewriterMode"}</span>`,a.appendChild(l)}let r=a.querySelector("#asri-enhance-typewriter");if(r&&(r.onclick=l=>Jt(n,l)),!a.querySelector("#asri-enhance-focus")){let l=document.createElement("button");l.className="b3-menu__item",l.id="asri-enhance-focus",l.innerHTML=`${O}<span class="b3-menu__label">${((s=n.i18n)==null?void 0:s.focus)||"focusMode"}</span>`,a.appendChild(l)}let i=a.querySelector("#asri-enhance-focus");i&&(i.onclick=l=>en(n,l))}var tn=require("siyuan"),Fl=()=>(0,tn.getFrontend)().endsWith("mobile");async function Qo(){return(await(await fetch("/api/system/getConf",{method:"POST",headers:{"Content-Type":"application/json"}})).json()).data.conf}async function $l(){let n=await Qo();return n.appearance.modeOS?2:n.appearance.mode||0}function Jo(n,t){let e="#iconLight";t===1?e="#iconDark":t===2&&(e="#iconMode"),n.innerHTML=`<use xlink:href="${e}"></use>`}async function Zo(n){let t=await Qo();await fetch("/api/setting/setAppearance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t.appearance,modeOS:n})})}var Ba=async n=>{n===2?await Zo(!0):(await Zo(!1),await fetch("/api/system/setAppearanceMode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:n})}));let t=document.querySelector("#barMode");t&&Jo(t,n)};function es(n){if(!Fl())return;let t=document.querySelector("#toolbarName");if(!t||document.querySelector("#barMode"))return;let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.id="barMode",e.setAttribute("class","toolbar__icon toolbar__item asri-enhance-mobilemenu-btn"),e.setAttribute("width","1em"),e.setAttribute("height","1em"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),$l().then(a=>{Jo(e,a)}),e.addEventListener("click",a=>{var i,o,s;a.preventDefault(),a.stopPropagation();let r=new tn.Menu("barmode",()=>{});r.element.classList.add("asri-enhance-mobilemenu"),r.addItem({icon:"iconLight",label:((i=n.i18n)==null?void 0:i.light)||"Light",click:()=>{Ba(0)}}),r.addItem({icon:"iconDark",label:((o=n.i18n)==null?void 0:o.dark)||"Dark",click:()=>{Ba(1)}}),r.addItem({icon:"iconMode",label:((s=n.i18n)==null?void 0:s.followSystem)||"Follow System",click:()=>{Ba(2)}}),r.open({x:a.clientX,y:a.clientY+20})}),t.after(e)}var Ga=!1,pe=null,za=0,ne=null,Ie=null,Ne=null,Fe=null;function ja(){return document.querySelector(".protyle-hint.hint--menu:not(.fn__none)")}function we(){if(Ga=!1,ne=null,pe!==null&&(clearInterval(pe),pe=null),Ie){try{Ie.disconnect()}catch(n){}Ie=null}if(Ne){try{Ne.disconnect()}catch(n){}Ne=null}}function Ka(n){return!!(n&&document.body.contains(n)&&!n.classList.contains("fn__none"))}function Va(){if(ne){if(!Ie){Ie=new MutationObserver(()=>{Ka(ne)||we()});try{Ie.observe(ne,{attributes:!0,attributeFilter:["class","style"]})}catch(n){}}if(!Ne){Ne=new MutationObserver(()=>{Ka(ne)||we()});try{Ne.observe(document.body,{childList:!0,subtree:!0})}catch(n){}}}}function Ol(){let n=ja();return n?(ne=n,Va(),!0):(za=0,pe=setInterval(()=>{za+=1;let t=ja();t?(ne=t,clearInterval(pe),pe=null,Va()):za>=10&&(clearInterval(pe),pe=null,we())},100),!1)}function Dl(n){return n?Array.from(n.querySelectorAll(".b3-list-item")):[]}function as(n){return n?n.querySelector(".b3-list-item--focus"):null}function ql(n){return n.map(t=>{let e=t.getBoundingClientRect();return{el:t,x:e.left+e.width/2,y:e.top+e.height/2}})}function Bl(n,t,e){if(!t||n.length===0)return null;let a=t.getBoundingClientRect(),r={x:a.left+a.width/2,y:a.top+a.height/2,el:t},i=ql(n),o=Math.max(a.width/2,10),s;switch(e){case"ArrowUp":s=d=>d.y<r.y-1&&Math.abs(d.x-r.x)<=o;break;case"ArrowDown":s=d=>d.y>r.y+1&&Math.abs(d.x-r.x)<=o;break;case"ArrowLeft":s=d=>d.x<r.x-1;break;case"ArrowRight":s=d=>d.x>r.x+1;break;default:return null}let l=i.filter(d=>d.el!==t&&s(d));if(l.length===0)return null;let c=(d,k)=>{let g=d.x-k.x,T=d.y-k.y;return g*g+T*T},u=l[0],f=c(u,r);for(let d=1;d<l.length;d++){let k=c(l[d],r);k<f&&(u=l[d],f=k)}return u.el}function ts(n){if(!ne||!n)return;let t=as(ne);if(t!==n){t&&t.classList.remove("b3-list-item--focus"),n.classList.add("b3-list-item--focus");try{n.scrollIntoView({block:"nearest",inline:"nearest"})}catch(e){}}}function zl(n,t){var a,r;let e=n.indexOf(t);return e===-1?(a=n[0])!=null?a:null:e+1<n.length?n[e+1]:(r=n[0])!=null?r:null}function Gl(n,t){var a,r;let e=n.indexOf(t);return e===-1?(a=n[n.length-1])!=null?a:null:e-1>=0?n[e-1]:(r=n[n.length-1])!=null?r:null}function ns(n,t){let e=t.getBoundingClientRect(),a=e.top+e.height/2,r=[];for(let i of n){if(i===t)continue;let o=i.getBoundingClientRect(),s=o.top+o.height/2,l=Math.min(e.height,o.height)/2;Math.abs(s-a)<=l&&r.push(i)}return r}function jl(n){return n.map(t=>({el:t,x:t.getBoundingClientRect().left})).sort((t,e)=>t.x-e.x).map(t=>t.el)}function Kl(n){return n.map(t=>({el:t,x:t.getBoundingClientRect().left})).sort((t,e)=>e.x-t.x).map(t=>t.el)}var Vl=n=>{var l,c;if(n.key==="/"){we(),Ga=!0,Ol();return}if(!Ga)return;if(n.key==="Escape"){we();return}if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(n.key))return;let e=ne||ja();if(!e||!Ka(e)){we();return}n.preventDefault(),n.stopPropagation(),ne=e,Va();let a=Dl(e);if(a.length===0)return;let r=as(e);r||(r=a[0],r.classList.add("b3-list-item--focus"));let i=Bl(a,r,n.key);if(i){ts(i);return}let o=null,s=n.key;if(s==="ArrowDown")o=zl(a,r);else if(s==="ArrowUp")o=Gl(a,r);else if(s==="ArrowRight"){let u=ns(a,r);u.length>0&&(o=(l=jl(u)[0])!=null?l:null)}else if(s==="ArrowLeft"){let u=ns(a,r);u.length>0&&(o=(c=Kl(u)[0])!=null?c:null)}o&&o!==r&&ts(o)};function rs(){typeof document!="undefined"&&(Fe||(Fe=Vl,document.addEventListener("keydown",Fe,{capture:!0})))}function is(){typeof document!="undefined"&&(Fe&&(document.removeEventListener("keydown",Fe,{capture:!0}),Fe=null),we())}var Wa=class extends os.Plugin{constructor(){super(...arguments);this.unsubscribeBarModeClick=null;this.asriConfigClickHandler=null;this.themeModeObserver=null;this.themeModeChangeTimers=[];this.paletteDisableMouseUpHandler=null;this.paletteDisableDebounceTimer=null}async applyAllConfigs(e){await Promise.all([rr(this,e).catch(()=>{}),sr(this,e).catch(()=>{}),ur(this,e).catch(()=>{}),hr(this,e).catch(()=>{}),gr(this,e).catch(()=>{}),vr(this,e).catch(()=>{}),wr(this,e).catch(()=>{}),Tr(this,e).catch(()=>{}),Lr(this,e).catch(()=>{}),Sr(this,e).catch(()=>{}),Ir(this,e).catch(()=>{}),$r(this,e).catch(()=>{}),Dr(this,e).catch(()=>{}),Gr(this,e).catch(()=>{}),Kr(this,e).catch(()=>{}),Br(this,e).catch(()=>{}),Ur(this,e).catch(()=>{}),ii(this,e).catch(()=>{}),Ai(this,e).catch(()=>{}),Mi(this,e).catch(()=>{}),Si(this,e).catch(()=>{}),Ri(this,e).catch(()=>{}),Ni(this,e).catch(()=>{}),$i(this,e).catch(()=>{}),Di(this,e).catch(()=>{}),Bi(this,e).catch(()=>{}),ji(this,e).catch(()=>{}),Wi(this,e).catch(()=>{}),Xi(this,e).catch(()=>{}),eo(this,e).catch(()=>{}),no(this,e).catch(()=>{}),io(this,e).catch(()=>{}),lo(this,e).catch(()=>{}),mo(this,e).catch(()=>{}),fo(this,e).catch(()=>{}),yo(this,e).catch(()=>{}),ko(this,e).catch(()=>{}),Co(this,e).catch(()=>{}),Ao(this,e).catch(()=>{}),Po(this,e).catch(()=>{}),Ro(this,e).catch(()=>{}),Fo(this,e).catch(()=>{}),Do(this,e).catch(()=>{}),jo(this,e).catch(()=>{}),Ko(this,e).catch(()=>{}),er(this,e).catch(()=>{})])}async onload(){var r,i;this.unsubscribeBarModeClick=Uo(this,o=>Xo(this,o)),es(this),this.asriConfigClickHandler=o=>{queueMicrotask(()=>{let s=o.target;if(!s||s.closest("#asri-enhance-amber")||s.closest("#asri-enhance-sakura")||s.closest("#asri-enhance-wilderness")||s.closest("#asri-enhance-midnight")||s.closest("#asri-enhance-salt")||s.closest("#asri-enhance-rosepine")||s.closest("#asri-enhance-topaz")||s.closest("#asri-enhance-oxygen")||s.closest("#asri-enhance-shade")||s.closest("#asri-enhance-gruvbox")||s.closest("#asri-enhance-glitch")||s.closest("#asri-enhance-nostalgia"))return;let l=s.closest(".asri-config");l&&l.id!=="topbarFusionPlus"&&l.id!=="asriChroma"&&(an.forEach(c=>{Ua(this,c,"config.json").catch(()=>{})}),qe(this,"config.json").catch(()=>{}))})},document.addEventListener("click",this.asriConfigClickHandler,!0),this.paletteDisableMouseUpHandler=o=>{queueMicrotask(()=>{var c,u;let s=o.target;if(!s)return;if(((c=s.id)==null?void 0:c.startsWith("prst-palette"))||s.closest("[id^='prst-palette']")!==null||s.id==="pickColor"||s.closest("#pickColor")!==null||s.id==="followSysAccent"||s.closest("#followSysAccent")!==null||s.id==="followCoverImgColor"||s.closest("#followCoverImgColor")!==null){this.paletteDisableDebounceTimer!==null&&clearTimeout(this.paletteDisableDebounceTimer);let f=null;if((u=s.id)!=null&&u.startsWith("prst-palette"))f=s.id.replace("prst-palette-","");else{let d=s.closest("[id^='prst-palette']");d&&(f=d.id.replace("prst-palette-",""))}this.paletteDisableDebounceTimer=window.setTimeout(()=>{Za(this,"config.json").then(()=>{qe(this,"config.json").then(()=>{if(f){let d=document.documentElement;d&&d.getAttribute("data-asri-palette")!==f&&d.setAttribute("data-asri-palette",f)}p(this,"config.json").then(d=>{this.applyAllConfigs(d).catch(()=>{})}).catch(()=>{})}).catch(()=>{})}).catch(()=>{}),this.paletteDisableDebounceTimer=null},200)}})},document.addEventListener("mouseup",this.paletteDisableMouseUpHandler,!1);let e=await p(this,"config.json"),a=document.documentElement;a&&(this.themeModeObserver=new MutationObserver(o=>{queueMicrotask(()=>{for(let s of o)if(s.type==="attributes"&&s.attributeName==="data-theme-mode"){this.themeModeChangeTimers.forEach(u=>{clearTimeout(u)}),this.themeModeChangeTimers=[],p(this,"config.json").then(u=>{this.applyAllConfigs(u).catch(()=>{})}).catch(()=>{});let l=window.setTimeout(()=>{p(this,"config.json").then(u=>{this.applyAllConfigs(u).catch(()=>{})}).catch(()=>{})},100);this.themeModeChangeTimers.push(l);let c=window.setTimeout(()=>{p(this,"config.json").then(u=>{this.applyAllConfigs(u).catch(()=>{})}).catch(()=>{})},500);this.themeModeChangeTimers.push(c)}})}),this.themeModeObserver.observe(a,{attributes:!0,attributeFilter:["data-theme-mode"]})),await this.applyAllConfigs(e),rs(),this.addCommand({langKey:"asri-enhance-typewriter",langText:((r=this.i18n)==null?void 0:r.typewriter)||"\u5207\u6362\u6253\u5B57\u673A\u6A21\u5F0F",hotkey:"",callback:()=>{Jt(this)}}),this.addCommand({langKey:"asri-enhance-focus",langText:((i=this.i18n)==null?void 0:i.focus)||"\u5207\u6362\u805A\u7126\u6A21\u5F0F",hotkey:"",callback:()=>{en(this)}}),setTimeout(()=>{this.applyAllConfigs(e).catch(()=>{})},100),setTimeout(()=>{this.applyAllConfigs(e).catch(()=>{})},500)}onunload(){this.unsubscribeBarModeClick&&(this.unsubscribeBarModeClick(),this.unsubscribeBarModeClick=null),this.asriConfigClickHandler&&(document.removeEventListener("click",this.asriConfigClickHandler,!0),this.asriConfigClickHandler=null),this.themeModeObserver&&(this.themeModeObserver.disconnect(),this.themeModeObserver=null),this.themeModeChangeTimers.forEach(a=>{clearTimeout(a)}),this.themeModeChangeTimers=[],this.paletteDisableMouseUpHandler&&(document.removeEventListener("mouseup",this.paletteDisableMouseUpHandler,!0),this.paletteDisableMouseUpHandler=null),this.paletteDisableDebounceTimer!==null&&(clearTimeout(this.paletteDisableDebounceTimer),this.paletteDisableDebounceTimer=null),Xr(),is(),St(),qt(),Bt(),Kt(),Ut(),Qt(),ut();let e=document.documentElement;e&&Array.from(e.attributes).forEach(r=>{r.name.startsWith("data-asri-enhance-")&&e.removeAttribute(r.name)})}async uninstall(){this.onunload(),await Xa(this,"config.json").catch(()=>{})}};module.exports=Wa;
